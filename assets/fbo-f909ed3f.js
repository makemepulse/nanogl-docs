import{_ as u}from"./UICallout.vue_vue_type_script_setup_true_lang-8933784a.js";import{b as c}from"./route-block-83d24a4e.js";import{o as i,c as r,a as n,b as t,w as o,e as s,d as a,g as k}from"./index-85277473.js";const d={class:"markdown-body"},h={class:"content-wrapper"},f=a(`<h1 id="fbo" tabindex="-1">Fbo</h1><p>The Fbo class manages <strong>framebuffers creation</strong> with :</p><ul><li>color</li><li>optional depth and/or stencil</li><li>resizing</li><li>binding helpers</li></ul><p>It supports any kind of pixel formats (<code class="language-js"><span class="token constant">RGB</span></code>, <code class="language-js"><span class="token constant">RGBA</span></code>, <code class="language-js"><span class="token constant">LUMINANCE</span></code>, etc.) and any kind of pixel type (<code class="language-js"><span class="token constant">UNSIGNED_BYTE</span></code>, <code class="language-js"><span class="token constant">FLOAT</span></code>, etc.).</p><h2 id="create" tabindex="-1">Create an FBO</h2><p>You can create an FBO with the <code class="language-js">Fbo</code> class, providing the gl context.</p><pre class="language-js"><code class="language-js"><span class="token keyword">import</span> Fbo <span class="token keyword">from</span> <span class="token string">&quot;nanogl/fbo&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> fbo <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Fbo</span><span class="token punctuation">(</span>gl<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><h2 id="bind-fbo" tabindex="-1">Bind FBO</h2><p>The FBO is bound on its creation. You can later bind it using the <code class="language-js">bind</code> function.</p>`,9),g=n("p",null,[n("strong",null,"Note :"),s(" If you use a function that requires the FBO to be bound, directly after its creation, there is no need to call the bind function.")],-1),b=a(`<pre class="language-js"><code class="language-js"><span class="token function">fbo</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><h2 id="resizing" tabindex="-1">Resizing</h2><p>By default, your FBO will be 0x0. You can change its size with the <code class="language-js">resize</code> function.</p><pre class="language-js"><code class="language-js"><span class="token comment">// set FBO size to 128x128</span>
fbo<span class="token punctuation">.</span><span class="token function">resize</span><span class="token punctuation">(</span><span class="token number">128</span><span class="token punctuation">,</span><span class="token number">128</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><h2 id="attach-color" tabindex="-1">Attach color</h2><p>You can attach a texture to the color attachment 0 with the <code class="language-js">attachColor</code> function.</p>`,6),m=n("p",null,[n("strong",null,"Important :"),s(" The FBO must be bound before using attach functions.")],-1),x=a(`<pre class="language-js"><code class="language-js"><span class="token function">fbo</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

fbo<span class="token punctuation">.</span><span class="token function">attachColor</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// you can specify a pixel format (default is gl.RGB)</span>
fbo<span class="token punctuation">.</span><span class="token function">attachColor</span><span class="token punctuation">(</span>gl<span class="token punctuation">.</span><span class="token constant">RGBA</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// you can specify a pixel type (default is gl.UNSIGNED_BYTE)</span>
fbo<span class="token punctuation">.</span><span class="token function">attachColor</span><span class="token punctuation">(</span>gl<span class="token punctuation">.</span><span class="token constant">RGB</span><span class="token punctuation">,</span> gl<span class="token punctuation">.</span><span class="token constant">FLOAT</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// you can specify a pixel internal format (default is &#39;format&#39; parameter value)</span>
fbo<span class="token punctuation">.</span><span class="token function">attachColor</span><span class="token punctuation">(</span>gl<span class="token punctuation">.</span><span class="token constant">RGB</span><span class="token punctuation">,</span> gl<span class="token punctuation">.</span><span class="token constant">UNSIGNED_BYTE</span><span class="token punctuation">,</span> gl<span class="token punctuation">.</span><span class="token constant">RGBA</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><h2 id="attach-depth%2Fstencil" tabindex="-1">Attach depth/stencil</h2><p>You can attach a renderbuffer or texture for depth and/or stencil to this FBO with the <code class="language-js">attachDepth</code> function.</p><p>You can choose, in order :</p><ul><li>to add a depth component or not</li><li>to add a stencil component or not</li><li>to use a texture or a renderbuffer</li></ul>`,5),_=n("p",null,[n("strong",null,"Important :"),s(" The FBO must be bound before using attach functions.")],-1),w=a(`<pre class="language-js"><code class="language-js"><span class="token function">fbo</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// without any arguments, the depth component will be added,</span>
<span class="token comment">// the stencil component will not</span>
<span class="token comment">// and a renderbuffer will be used</span>
fbo<span class="token punctuation">.</span><span class="token function">attachDepth</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// add only stencil &amp; use renderbuffer</span>
fbo<span class="token punctuation">.</span><span class="token function">attachDepth</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// add depth, stencil &amp; use renderbuffer</span>
fbo<span class="token punctuation">.</span><span class="token function">attachDepth</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// add depth &amp; use texture</span>
fbo<span class="token punctuation">.</span><span class="token function">attachDepth</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// add depth, stencil &amp; use texture</span>
fbo<span class="token punctuation">.</span><span class="token function">attachDepth</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><h2 id="get-color-texture" tabindex="-1">Get color texture</h2><p>You can get the color texture of the FBO (if it exists) with the <code class="language-js">getColorTexture</code> function.</p>`,3),B=a(`<pre class="language-js"><code class="language-js"><span class="token comment">// get the fbo color texture</span>
<span class="token keyword">const</span> colorTexture <span class="token operator">=</span> fbo<span class="token punctuation">.</span><span class="token function">getColorTexture</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// use sampler options</span>
<span class="token function">colorTexture</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
colorTexture<span class="token punctuation">.</span><span class="token function">repeat</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// set program texture with fbo color texture</span>
prg<span class="token punctuation">.</span><span class="token function">uTexture</span><span class="token punctuation">(</span>colorTexture<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><h2 id="get-depth%2Fstencil-data" tabindex="-1">Get depth/stencil data</h2><p>You can get the depth/stencil texture or renderbuffer of the FBO (if it exists) with the <code class="language-js">getDepth</code> function.</p>`,3),y=a(`<pre class="language-js"><code class="language-js"><span class="token comment">// fbo1 has depth component &amp; uses renderbuffer</span>
<span class="token keyword">const</span> fbo1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Fbo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
fbo1<span class="token punctuation">.</span><span class="token function">attachDepth</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// returns RenderBuffer with depth data</span>
<span class="token keyword">const</span> fbo1Depth <span class="token operator">=</span> fbo1<span class="token punctuation">.</span><span class="token function">getDepth</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// fbo2 has depth component &amp; stencil component</span>
<span class="token comment">// &amp; uses texture</span>
<span class="token keyword">const</span> fbo2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Fbo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
fbo2<span class="token punctuation">.</span><span class="token function">attachDepth</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// returns Texture2D with depth &amp; stencil data</span>
<span class="token keyword">const</span> fbo2Depth <span class="token operator">=</span> fbo2<span class="token punctuation">.</span><span class="token function">getDepth</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><h2 id="viewport" tabindex="-1">Viewport</h2><p>You can set the gl viewport to the size of the FBO with the <code class="language-js">defaultViewport</code> function.</p><pre class="language-js"><code class="language-js"><span class="token comment">// set FBO size to 128x128</span>
fbo<span class="token punctuation">.</span><span class="token function">resize</span><span class="token punctuation">(</span><span class="token number">128</span><span class="token punctuation">,</span><span class="token number">128</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// set gl viewport with x = 0 ; y = 0</span>
<span class="token comment">// width = 128 &amp; height = 128</span>
fbo<span class="token punctuation">.</span><span class="token function">defaultViewport</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><h2 id="clear" tabindex="-1">Clear</h2><p>You can clear all buffers (color, stencil and depth) of the FBO with the <code class="language-js">clear</code> function.</p>`,6),j=n("p",null,[n("strong",null,"Important :"),s(" The FBO must be bound before using clear function.")],-1),F=a(`<pre class="language-js"><code class="language-js"><span class="token function">fbo</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

fbo<span class="token punctuation">.</span><span class="token function">defaultViewport</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// clear all buffers</span>
fbo<span class="token punctuation">.</span><span class="token function">clear</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><h2 id="delete" tabindex="-1">Delete the FBO</h2><p>You can delete the webgl objects related to this FBO with the <code class="language-js">dispose</code> function.</p><pre class="language-js"><code class="language-js">fbo<span class="token punctuation">.</span><span class="token function">dispose</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>`,4),O=a('<div class="toc-wrapper"><p><div class="toc"><h2 class="my-8">Summary</h2><ul><li><a href="#create">Create an FBO</a></li><li><a href="#bind-fbo">Bind FBO</a></li><li><a href="#resizing">Resizing</a></li><li><a href="#attach-color">Attach color</a></li><li><a href="#attach-depth%2Fstencil">Attach depth/stencil</a></li><li><a href="#get-color-texture">Get color texture</a></li><li><a href="#get-depth%2Fstencil-data">Get depth/stencil data</a></li><li><a href="#viewport">Viewport</a></li><li><a href="#clear">Clear</a></li><li><a href="#delete">Delete the FBO</a></li></ul></div></p></div>',1),D={__name:"fbo",setup(T,{expose:l}){return l({frontmatter:{}}),(C,G)=>{const e=u,p=k("router-link");return i(),r("div",d,[n("div",h,[f,t(e,null,{default:o(()=>[g]),_:1}),b,t(e,{type:"important"},{default:o(()=>[m]),_:1}),x,t(e,{type:"important"},{default:o(()=>[_]),_:1}),w,n("p",null,[s("You can then use it as you would a normal "),t(p,{to:"/guide/quick-guides/texture-2d"},{default:o(()=>[s("Texture2D")]),_:1}),s(".")]),B,n("p",null,[s("You can then use it as you would a normal RenderBuffer or "),t(p,{to:"/guide/quick-guides/texture-2d"},{default:o(()=>[s("Texture2D")]),_:1}),s(".")]),y,t(e,{type:"important"},{default:o(()=>[j]),_:1}),F]),O])}}};typeof c=="function"&&c(D);export{D as default};
