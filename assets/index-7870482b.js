var l1={};l1.EPSILON=1e-6;l1.ARRAY_TYPE=typeof Float32Array<"u"?Float32Array:Array;l1.RANDOM=Math.random;l1.setMatrixArrayType=function(n){GLMAT_ARRAY_TYPE=n};var L1=Math.PI/180;l1.toRadian=function(n){return n*L1};var r1=l1,m1=r1,B={};B.create=function(){var n=new m1.ARRAY_TYPE(4);return n[0]=1,n[1]=0,n[2]=0,n[3]=1,n};B.clone=function(n){var r=new m1.ARRAY_TYPE(4);return r[0]=n[0],r[1]=n[1],r[2]=n[2],r[3]=n[3],r};B.copy=function(n,r){return n[0]=r[0],n[1]=r[1],n[2]=r[2],n[3]=r[3],n};B.identity=function(n){return n[0]=1,n[1]=0,n[2]=0,n[3]=1,n};B.transpose=function(n,r){if(n===r){var e=r[1];n[1]=r[2],n[2]=e}else n[0]=r[0],n[1]=r[2],n[2]=r[1],n[3]=r[3];return n};B.invert=function(n,r){var e=r[0],i=r[1],c=r[2],s=r[3],f=e*s-c*i;return f?(f=1/f,n[0]=s*f,n[1]=-i*f,n[2]=-c*f,n[3]=e*f,n):null};B.adjoint=function(n,r){var e=r[0];return n[0]=r[3],n[1]=-r[1],n[2]=-r[2],n[3]=e,n};B.determinant=function(n){return n[0]*n[3]-n[2]*n[1]};B.multiply=function(n,r,e){var i=r[0],c=r[1],s=r[2],f=r[3],h=e[0],a=e[1],l=e[2],v=e[3];return n[0]=i*h+s*a,n[1]=c*h+f*a,n[2]=i*l+s*v,n[3]=c*l+f*v,n};B.mul=B.multiply;B.rotate=function(n,r,e){var i=r[0],c=r[1],s=r[2],f=r[3],h=Math.sin(e),a=Math.cos(e);return n[0]=i*a+s*h,n[1]=c*a+f*h,n[2]=i*-h+s*a,n[3]=c*-h+f*a,n};B.scale=function(n,r,e){var i=r[0],c=r[1],s=r[2],f=r[3],h=e[0],a=e[1];return n[0]=i*h,n[1]=c*h,n[2]=s*a,n[3]=f*a,n};B.fromRotation=function(n,r){var e=Math.sin(r),i=Math.cos(r);return n[0]=i,n[1]=e,n[2]=-e,n[3]=i,n};B.fromScaling=function(n,r){return n[0]=r[0],n[1]=0,n[2]=0,n[3]=r[1],n};B.str=function(n){return"mat2("+n[0]+", "+n[1]+", "+n[2]+", "+n[3]+")"};B.frob=function(n){return Math.sqrt(Math.pow(n[0],2)+Math.pow(n[1],2)+Math.pow(n[2],2)+Math.pow(n[3],2))};B.LDU=function(n,r,e,i){return n[2]=i[2]/i[0],e[0]=i[0],e[1]=i[1],e[3]=i[3]-n[2]*e[1],[n,r,e]};var g1=r1,G={};G.create=function(){var n=new g1.ARRAY_TYPE(6);return n[0]=1,n[1]=0,n[2]=0,n[3]=1,n[4]=0,n[5]=0,n};G.clone=function(n){var r=new g1.ARRAY_TYPE(6);return r[0]=n[0],r[1]=n[1],r[2]=n[2],r[3]=n[3],r[4]=n[4],r[5]=n[5],r};G.copy=function(n,r){return n[0]=r[0],n[1]=r[1],n[2]=r[2],n[3]=r[3],n[4]=r[4],n[5]=r[5],n};G.identity=function(n){return n[0]=1,n[1]=0,n[2]=0,n[3]=1,n[4]=0,n[5]=0,n};G.invert=function(n,r){var e=r[0],i=r[1],c=r[2],s=r[3],f=r[4],h=r[5],a=e*s-i*c;return a?(a=1/a,n[0]=s*a,n[1]=-i*a,n[2]=-c*a,n[3]=e*a,n[4]=(c*h-s*f)*a,n[5]=(i*f-e*h)*a,n):null};G.determinant=function(n){return n[0]*n[3]-n[1]*n[2]};G.multiply=function(n,r,e){var i=r[0],c=r[1],s=r[2],f=r[3],h=r[4],a=r[5],l=e[0],v=e[1],x=e[2],M=e[3],y=e[4],t=e[5];return n[0]=i*l+s*v,n[1]=c*l+f*v,n[2]=i*x+s*M,n[3]=c*x+f*M,n[4]=i*y+s*t+h,n[5]=c*y+f*t+a,n};G.mul=G.multiply;G.rotate=function(n,r,e){var i=r[0],c=r[1],s=r[2],f=r[3],h=r[4],a=r[5],l=Math.sin(e),v=Math.cos(e);return n[0]=i*v+s*l,n[1]=c*v+f*l,n[2]=i*-l+s*v,n[3]=c*-l+f*v,n[4]=h,n[5]=a,n};G.scale=function(n,r,e){var i=r[0],c=r[1],s=r[2],f=r[3],h=r[4],a=r[5],l=e[0],v=e[1];return n[0]=i*l,n[1]=c*l,n[2]=s*v,n[3]=f*v,n[4]=h,n[5]=a,n};G.translate=function(n,r,e){var i=r[0],c=r[1],s=r[2],f=r[3],h=r[4],a=r[5],l=e[0],v=e[1];return n[0]=i,n[1]=c,n[2]=s,n[3]=f,n[4]=i*l+s*v+h,n[5]=c*l+f*v+a,n};G.fromRotation=function(n,r){var e=Math.sin(r),i=Math.cos(r);return n[0]=i,n[1]=e,n[2]=-e,n[3]=i,n[4]=0,n[5]=0,n};G.fromScaling=function(n,r){return n[0]=r[0],n[1]=0,n[2]=0,n[3]=r[1],n[4]=0,n[5]=0,n};G.fromTranslation=function(n,r){return n[0]=1,n[1]=0,n[2]=0,n[3]=1,n[4]=r[0],n[5]=r[1],n};G.str=function(n){return"mat2d("+n[0]+", "+n[1]+", "+n[2]+", "+n[3]+", "+n[4]+", "+n[5]+")"};G.frob=function(n){return Math.sqrt(Math.pow(n[0],2)+Math.pow(n[1],2)+Math.pow(n[2],2)+Math.pow(n[3],2)+Math.pow(n[4],2)+Math.pow(n[5],2)+1)};var R1=r1,Z={};Z.create=function(){var n=new R1.ARRAY_TYPE(9);return n[0]=1,n[1]=0,n[2]=0,n[3]=0,n[4]=1,n[5]=0,n[6]=0,n[7]=0,n[8]=1,n};Z.fromMat4=function(n,r){return n[0]=r[0],n[1]=r[1],n[2]=r[2],n[3]=r[4],n[4]=r[5],n[5]=r[6],n[6]=r[8],n[7]=r[9],n[8]=r[10],n};Z.clone=function(n){var r=new R1.ARRAY_TYPE(9);return r[0]=n[0],r[1]=n[1],r[2]=n[2],r[3]=n[3],r[4]=n[4],r[5]=n[5],r[6]=n[6],r[7]=n[7],r[8]=n[8],r};Z.copy=function(n,r){return n[0]=r[0],n[1]=r[1],n[2]=r[2],n[3]=r[3],n[4]=r[4],n[5]=r[5],n[6]=r[6],n[7]=r[7],n[8]=r[8],n};Z.identity=function(n){return n[0]=1,n[1]=0,n[2]=0,n[3]=0,n[4]=1,n[5]=0,n[6]=0,n[7]=0,n[8]=1,n};Z.transpose=function(n,r){if(n===r){var e=r[1],i=r[2],c=r[5];n[1]=r[3],n[2]=r[6],n[3]=e,n[5]=r[7],n[6]=i,n[7]=c}else n[0]=r[0],n[1]=r[3],n[2]=r[6],n[3]=r[1],n[4]=r[4],n[5]=r[7],n[6]=r[2],n[7]=r[5],n[8]=r[8];return n};Z.invert=function(n,r){var e=r[0],i=r[1],c=r[2],s=r[3],f=r[4],h=r[5],a=r[6],l=r[7],v=r[8],x=v*f-h*l,M=-v*s+h*a,y=l*s-f*a,t=e*x+i*M+c*y;return t?(t=1/t,n[0]=x*t,n[1]=(-v*i+c*l)*t,n[2]=(h*i-c*f)*t,n[3]=M*t,n[4]=(v*e-c*a)*t,n[5]=(-h*e+c*s)*t,n[6]=y*t,n[7]=(-l*e+i*a)*t,n[8]=(f*e-i*s)*t,n):null};Z.adjoint=function(n,r){var e=r[0],i=r[1],c=r[2],s=r[3],f=r[4],h=r[5],a=r[6],l=r[7],v=r[8];return n[0]=f*v-h*l,n[1]=c*l-i*v,n[2]=i*h-c*f,n[3]=h*a-s*v,n[4]=e*v-c*a,n[5]=c*s-e*h,n[6]=s*l-f*a,n[7]=i*a-e*l,n[8]=e*f-i*s,n};Z.determinant=function(n){var r=n[0],e=n[1],i=n[2],c=n[3],s=n[4],f=n[5],h=n[6],a=n[7],l=n[8];return r*(l*s-f*a)+e*(-l*c+f*h)+i*(a*c-s*h)};Z.multiply=function(n,r,e){var i=r[0],c=r[1],s=r[2],f=r[3],h=r[4],a=r[5],l=r[6],v=r[7],x=r[8],M=e[0],y=e[1],t=e[2],w=e[3],p=e[4],d=e[5],R=e[6],z=e[7],_=e[8];return n[0]=M*i+y*f+t*l,n[1]=M*c+y*h+t*v,n[2]=M*s+y*a+t*x,n[3]=w*i+p*f+d*l,n[4]=w*c+p*h+d*v,n[5]=w*s+p*a+d*x,n[6]=R*i+z*f+_*l,n[7]=R*c+z*h+_*v,n[8]=R*s+z*a+_*x,n};Z.mul=Z.multiply;Z.translate=function(n,r,e){var i=r[0],c=r[1],s=r[2],f=r[3],h=r[4],a=r[5],l=r[6],v=r[7],x=r[8],M=e[0],y=e[1];return n[0]=i,n[1]=c,n[2]=s,n[3]=f,n[4]=h,n[5]=a,n[6]=M*i+y*f+l,n[7]=M*c+y*h+v,n[8]=M*s+y*a+x,n};Z.rotate=function(n,r,e){var i=r[0],c=r[1],s=r[2],f=r[3],h=r[4],a=r[5],l=r[6],v=r[7],x=r[8],M=Math.sin(e),y=Math.cos(e);return n[0]=y*i+M*f,n[1]=y*c+M*h,n[2]=y*s+M*a,n[3]=y*f-M*i,n[4]=y*h-M*c,n[5]=y*a-M*s,n[6]=l,n[7]=v,n[8]=x,n};Z.scale=function(n,r,e){var i=e[0],c=e[1];return n[0]=i*r[0],n[1]=i*r[1],n[2]=i*r[2],n[3]=c*r[3],n[4]=c*r[4],n[5]=c*r[5],n[6]=r[6],n[7]=r[7],n[8]=r[8],n};Z.fromTranslation=function(n,r){return n[0]=1,n[1]=0,n[2]=0,n[3]=0,n[4]=1,n[5]=0,n[6]=r[0],n[7]=r[1],n[8]=1,n};Z.fromRotation=function(n,r){var e=Math.sin(r),i=Math.cos(r);return n[0]=i,n[1]=e,n[2]=0,n[3]=-e,n[4]=i,n[5]=0,n[6]=0,n[7]=0,n[8]=1,n};Z.fromScaling=function(n,r){return n[0]=r[0],n[1]=0,n[2]=0,n[3]=0,n[4]=r[1],n[5]=0,n[6]=0,n[7]=0,n[8]=1,n};Z.fromMat2d=function(n,r){return n[0]=r[0],n[1]=r[1],n[2]=0,n[3]=r[2],n[4]=r[3],n[5]=0,n[6]=r[4],n[7]=r[5],n[8]=1,n};Z.fromQuat=function(n,r){var e=r[0],i=r[1],c=r[2],s=r[3],f=e+e,h=i+i,a=c+c,l=e*f,v=i*f,x=i*h,M=c*f,y=c*h,t=c*a,w=s*f,p=s*h,d=s*a;return n[0]=1-x-t,n[3]=v-d,n[6]=M+p,n[1]=v+d,n[4]=1-l-t,n[7]=y-w,n[2]=M-p,n[5]=y+w,n[8]=1-l-x,n};Z.normalFromMat4=function(n,r){var e=r[0],i=r[1],c=r[2],s=r[3],f=r[4],h=r[5],a=r[6],l=r[7],v=r[8],x=r[9],M=r[10],y=r[11],t=r[12],w=r[13],p=r[14],d=r[15],R=e*h-i*f,z=e*a-c*f,_=e*l-s*f,m=i*a-c*h,A=i*l-s*h,O=c*l-s*a,q=v*w-x*t,E=v*p-M*t,T=v*d-y*t,j=x*p-M*w,N=x*d-y*w,X=M*d-y*p,g=R*X-z*N+_*j+m*T-A*E+O*q;return g?(g=1/g,n[0]=(h*X-a*N+l*j)*g,n[1]=(a*T-f*X-l*E)*g,n[2]=(f*N-h*T+l*q)*g,n[3]=(c*N-i*X-s*j)*g,n[4]=(e*X-c*T+s*E)*g,n[5]=(i*T-e*N-s*q)*g,n[6]=(w*O-p*A+d*m)*g,n[7]=(p*_-t*O-d*z)*g,n[8]=(t*A-w*_+d*R)*g,n):null};Z.str=function(n){return"mat3("+n[0]+", "+n[1]+", "+n[2]+", "+n[3]+", "+n[4]+", "+n[5]+", "+n[6]+", "+n[7]+", "+n[8]+")"};Z.frob=function(n){return Math.sqrt(Math.pow(n[0],2)+Math.pow(n[1],2)+Math.pow(n[2],2)+Math.pow(n[3],2)+Math.pow(n[4],2)+Math.pow(n[5],2)+Math.pow(n[6],2)+Math.pow(n[7],2)+Math.pow(n[8],2))};var V1=Z,s1=r1,F={};F.create=function(){var n=new s1.ARRAY_TYPE(16);return n[0]=1,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=1,n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[10]=1,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,n};F.clone=function(n){var r=new s1.ARRAY_TYPE(16);return r[0]=n[0],r[1]=n[1],r[2]=n[2],r[3]=n[3],r[4]=n[4],r[5]=n[5],r[6]=n[6],r[7]=n[7],r[8]=n[8],r[9]=n[9],r[10]=n[10],r[11]=n[11],r[12]=n[12],r[13]=n[13],r[14]=n[14],r[15]=n[15],r};F.copy=function(n,r){return n[0]=r[0],n[1]=r[1],n[2]=r[2],n[3]=r[3],n[4]=r[4],n[5]=r[5],n[6]=r[6],n[7]=r[7],n[8]=r[8],n[9]=r[9],n[10]=r[10],n[11]=r[11],n[12]=r[12],n[13]=r[13],n[14]=r[14],n[15]=r[15],n};F.identity=function(n){return n[0]=1,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=1,n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[10]=1,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,n};F.transpose=function(n,r){if(n===r){var e=r[1],i=r[2],c=r[3],s=r[6],f=r[7],h=r[11];n[1]=r[4],n[2]=r[8],n[3]=r[12],n[4]=e,n[6]=r[9],n[7]=r[13],n[8]=i,n[9]=s,n[11]=r[14],n[12]=c,n[13]=f,n[14]=h}else n[0]=r[0],n[1]=r[4],n[2]=r[8],n[3]=r[12],n[4]=r[1],n[5]=r[5],n[6]=r[9],n[7]=r[13],n[8]=r[2],n[9]=r[6],n[10]=r[10],n[11]=r[14],n[12]=r[3],n[13]=r[7],n[14]=r[11],n[15]=r[15];return n};F.invert=function(n,r){var e=r[0],i=r[1],c=r[2],s=r[3],f=r[4],h=r[5],a=r[6],l=r[7],v=r[8],x=r[9],M=r[10],y=r[11],t=r[12],w=r[13],p=r[14],d=r[15],R=e*h-i*f,z=e*a-c*f,_=e*l-s*f,m=i*a-c*h,A=i*l-s*h,O=c*l-s*a,q=v*w-x*t,E=v*p-M*t,T=v*d-y*t,j=x*p-M*w,N=x*d-y*w,X=M*d-y*p,g=R*X-z*N+_*j+m*T-A*E+O*q;return g?(g=1/g,n[0]=(h*X-a*N+l*j)*g,n[1]=(c*N-i*X-s*j)*g,n[2]=(w*O-p*A+d*m)*g,n[3]=(M*A-x*O-y*m)*g,n[4]=(a*T-f*X-l*E)*g,n[5]=(e*X-c*T+s*E)*g,n[6]=(p*_-t*O-d*z)*g,n[7]=(v*O-M*_+y*z)*g,n[8]=(f*N-h*T+l*q)*g,n[9]=(i*T-e*N-s*q)*g,n[10]=(t*A-w*_+d*R)*g,n[11]=(x*_-v*A-y*R)*g,n[12]=(h*E-f*j-a*q)*g,n[13]=(e*j-i*E+c*q)*g,n[14]=(w*z-t*m-p*R)*g,n[15]=(v*m-x*z+M*R)*g,n):null};F.adjoint=function(n,r){var e=r[0],i=r[1],c=r[2],s=r[3],f=r[4],h=r[5],a=r[6],l=r[7],v=r[8],x=r[9],M=r[10],y=r[11],t=r[12],w=r[13],p=r[14],d=r[15];return n[0]=h*(M*d-y*p)-x*(a*d-l*p)+w*(a*y-l*M),n[1]=-(i*(M*d-y*p)-x*(c*d-s*p)+w*(c*y-s*M)),n[2]=i*(a*d-l*p)-h*(c*d-s*p)+w*(c*l-s*a),n[3]=-(i*(a*y-l*M)-h*(c*y-s*M)+x*(c*l-s*a)),n[4]=-(f*(M*d-y*p)-v*(a*d-l*p)+t*(a*y-l*M)),n[5]=e*(M*d-y*p)-v*(c*d-s*p)+t*(c*y-s*M),n[6]=-(e*(a*d-l*p)-f*(c*d-s*p)+t*(c*l-s*a)),n[7]=e*(a*y-l*M)-f*(c*y-s*M)+v*(c*l-s*a),n[8]=f*(x*d-y*w)-v*(h*d-l*w)+t*(h*y-l*x),n[9]=-(e*(x*d-y*w)-v*(i*d-s*w)+t*(i*y-s*x)),n[10]=e*(h*d-l*w)-f*(i*d-s*w)+t*(i*l-s*h),n[11]=-(e*(h*y-l*x)-f*(i*y-s*x)+v*(i*l-s*h)),n[12]=-(f*(x*p-M*w)-v*(h*p-a*w)+t*(h*M-a*x)),n[13]=e*(x*p-M*w)-v*(i*p-c*w)+t*(i*M-c*x),n[14]=-(e*(h*p-a*w)-f*(i*p-c*w)+t*(i*a-c*h)),n[15]=e*(h*M-a*x)-f*(i*M-c*x)+v*(i*a-c*h),n};F.determinant=function(n){var r=n[0],e=n[1],i=n[2],c=n[3],s=n[4],f=n[5],h=n[6],a=n[7],l=n[8],v=n[9],x=n[10],M=n[11],y=n[12],t=n[13],w=n[14],p=n[15],d=r*f-e*s,R=r*h-i*s,z=r*a-c*s,_=e*h-i*f,m=e*a-c*f,A=i*a-c*h,O=l*t-v*y,q=l*w-x*y,E=l*p-M*y,T=v*w-x*t,j=v*p-M*t,N=x*p-M*w;return d*N-R*j+z*T+_*E-m*q+A*O};F.multiply=function(n,r,e){var i=r[0],c=r[1],s=r[2],f=r[3],h=r[4],a=r[5],l=r[6],v=r[7],x=r[8],M=r[9],y=r[10],t=r[11],w=r[12],p=r[13],d=r[14],R=r[15],z=e[0],_=e[1],m=e[2],A=e[3];return n[0]=z*i+_*h+m*x+A*w,n[1]=z*c+_*a+m*M+A*p,n[2]=z*s+_*l+m*y+A*d,n[3]=z*f+_*v+m*t+A*R,z=e[4],_=e[5],m=e[6],A=e[7],n[4]=z*i+_*h+m*x+A*w,n[5]=z*c+_*a+m*M+A*p,n[6]=z*s+_*l+m*y+A*d,n[7]=z*f+_*v+m*t+A*R,z=e[8],_=e[9],m=e[10],A=e[11],n[8]=z*i+_*h+m*x+A*w,n[9]=z*c+_*a+m*M+A*p,n[10]=z*s+_*l+m*y+A*d,n[11]=z*f+_*v+m*t+A*R,z=e[12],_=e[13],m=e[14],A=e[15],n[12]=z*i+_*h+m*x+A*w,n[13]=z*c+_*a+m*M+A*p,n[14]=z*s+_*l+m*y+A*d,n[15]=z*f+_*v+m*t+A*R,n};F.mul=F.multiply;F.translate=function(n,r,e){var i=e[0],c=e[1],s=e[2],f,h,a,l,v,x,M,y,t,w,p,d;return r===n?(n[12]=r[0]*i+r[4]*c+r[8]*s+r[12],n[13]=r[1]*i+r[5]*c+r[9]*s+r[13],n[14]=r[2]*i+r[6]*c+r[10]*s+r[14],n[15]=r[3]*i+r[7]*c+r[11]*s+r[15]):(f=r[0],h=r[1],a=r[2],l=r[3],v=r[4],x=r[5],M=r[6],y=r[7],t=r[8],w=r[9],p=r[10],d=r[11],n[0]=f,n[1]=h,n[2]=a,n[3]=l,n[4]=v,n[5]=x,n[6]=M,n[7]=y,n[8]=t,n[9]=w,n[10]=p,n[11]=d,n[12]=f*i+v*c+t*s+r[12],n[13]=h*i+x*c+w*s+r[13],n[14]=a*i+M*c+p*s+r[14],n[15]=l*i+y*c+d*s+r[15]),n};F.scale=function(n,r,e){var i=e[0],c=e[1],s=e[2];return n[0]=r[0]*i,n[1]=r[1]*i,n[2]=r[2]*i,n[3]=r[3]*i,n[4]=r[4]*c,n[5]=r[5]*c,n[6]=r[6]*c,n[7]=r[7]*c,n[8]=r[8]*s,n[9]=r[9]*s,n[10]=r[10]*s,n[11]=r[11]*s,n[12]=r[12],n[13]=r[13],n[14]=r[14],n[15]=r[15],n};F.rotate=function(n,r,e,i){var c=i[0],s=i[1],f=i[2],h=Math.sqrt(c*c+s*s+f*f),a,l,v,x,M,y,t,w,p,d,R,z,_,m,A,O,q,E,T,j,N,X,g,K;return Math.abs(h)<s1.EPSILON?null:(h=1/h,c*=h,s*=h,f*=h,a=Math.sin(e),l=Math.cos(e),v=1-l,x=r[0],M=r[1],y=r[2],t=r[3],w=r[4],p=r[5],d=r[6],R=r[7],z=r[8],_=r[9],m=r[10],A=r[11],O=c*c*v+l,q=s*c*v+f*a,E=f*c*v-s*a,T=c*s*v-f*a,j=s*s*v+l,N=f*s*v+c*a,X=c*f*v+s*a,g=s*f*v-c*a,K=f*f*v+l,n[0]=x*O+w*q+z*E,n[1]=M*O+p*q+_*E,n[2]=y*O+d*q+m*E,n[3]=t*O+R*q+A*E,n[4]=x*T+w*j+z*N,n[5]=M*T+p*j+_*N,n[6]=y*T+d*j+m*N,n[7]=t*T+R*j+A*N,n[8]=x*X+w*g+z*K,n[9]=M*X+p*g+_*K,n[10]=y*X+d*g+m*K,n[11]=t*X+R*g+A*K,r!==n&&(n[12]=r[12],n[13]=r[13],n[14]=r[14],n[15]=r[15]),n)};F.rotateX=function(n,r,e){var i=Math.sin(e),c=Math.cos(e),s=r[4],f=r[5],h=r[6],a=r[7],l=r[8],v=r[9],x=r[10],M=r[11];return r!==n&&(n[0]=r[0],n[1]=r[1],n[2]=r[2],n[3]=r[3],n[12]=r[12],n[13]=r[13],n[14]=r[14],n[15]=r[15]),n[4]=s*c+l*i,n[5]=f*c+v*i,n[6]=h*c+x*i,n[7]=a*c+M*i,n[8]=l*c-s*i,n[9]=v*c-f*i,n[10]=x*c-h*i,n[11]=M*c-a*i,n};F.rotateY=function(n,r,e){var i=Math.sin(e),c=Math.cos(e),s=r[0],f=r[1],h=r[2],a=r[3],l=r[8],v=r[9],x=r[10],M=r[11];return r!==n&&(n[4]=r[4],n[5]=r[5],n[6]=r[6],n[7]=r[7],n[12]=r[12],n[13]=r[13],n[14]=r[14],n[15]=r[15]),n[0]=s*c-l*i,n[1]=f*c-v*i,n[2]=h*c-x*i,n[3]=a*c-M*i,n[8]=s*i+l*c,n[9]=f*i+v*c,n[10]=h*i+x*c,n[11]=a*i+M*c,n};F.rotateZ=function(n,r,e){var i=Math.sin(e),c=Math.cos(e),s=r[0],f=r[1],h=r[2],a=r[3],l=r[4],v=r[5],x=r[6],M=r[7];return r!==n&&(n[8]=r[8],n[9]=r[9],n[10]=r[10],n[11]=r[11],n[12]=r[12],n[13]=r[13],n[14]=r[14],n[15]=r[15]),n[0]=s*c+l*i,n[1]=f*c+v*i,n[2]=h*c+x*i,n[3]=a*c+M*i,n[4]=l*c-s*i,n[5]=v*c-f*i,n[6]=x*c-h*i,n[7]=M*c-a*i,n};F.fromTranslation=function(n,r){return n[0]=1,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=1,n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[10]=1,n[11]=0,n[12]=r[0],n[13]=r[1],n[14]=r[2],n[15]=1,n};F.fromScaling=function(n,r){return n[0]=r[0],n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=r[1],n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[10]=r[2],n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,n};F.fromRotation=function(n,r,e){var i=e[0],c=e[1],s=e[2],f=Math.sqrt(i*i+c*c+s*s),h,a,l;return Math.abs(f)<s1.EPSILON?null:(f=1/f,i*=f,c*=f,s*=f,h=Math.sin(r),a=Math.cos(r),l=1-a,n[0]=i*i*l+a,n[1]=c*i*l+s*h,n[2]=s*i*l-c*h,n[3]=0,n[4]=i*c*l-s*h,n[5]=c*c*l+a,n[6]=s*c*l+i*h,n[7]=0,n[8]=i*s*l+c*h,n[9]=c*s*l-i*h,n[10]=s*s*l+a,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,n)};F.fromXRotation=function(n,r){var e=Math.sin(r),i=Math.cos(r);return n[0]=1,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=i,n[6]=e,n[7]=0,n[8]=0,n[9]=-e,n[10]=i,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,n};F.fromYRotation=function(n,r){var e=Math.sin(r),i=Math.cos(r);return n[0]=i,n[1]=0,n[2]=-e,n[3]=0,n[4]=0,n[5]=1,n[6]=0,n[7]=0,n[8]=e,n[9]=0,n[10]=i,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,n};F.fromZRotation=function(n,r){var e=Math.sin(r),i=Math.cos(r);return n[0]=i,n[1]=e,n[2]=0,n[3]=0,n[4]=-e,n[5]=i,n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[10]=1,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,n};F.fromRotationTranslation=function(n,r,e){var i=r[0],c=r[1],s=r[2],f=r[3],h=i+i,a=c+c,l=s+s,v=i*h,x=i*a,M=i*l,y=c*a,t=c*l,w=s*l,p=f*h,d=f*a,R=f*l;return n[0]=1-(y+w),n[1]=x+R,n[2]=M-d,n[3]=0,n[4]=x-R,n[5]=1-(v+w),n[6]=t+p,n[7]=0,n[8]=M+d,n[9]=t-p,n[10]=1-(v+y),n[11]=0,n[12]=e[0],n[13]=e[1],n[14]=e[2],n[15]=1,n};F.fromRotationTranslationScale=function(n,r,e,i){var c=r[0],s=r[1],f=r[2],h=r[3],a=c+c,l=s+s,v=f+f,x=c*a,M=c*l,y=c*v,t=s*l,w=s*v,p=f*v,d=h*a,R=h*l,z=h*v,_=i[0],m=i[1],A=i[2];return n[0]=(1-(t+p))*_,n[1]=(M+z)*_,n[2]=(y-R)*_,n[3]=0,n[4]=(M-z)*m,n[5]=(1-(x+p))*m,n[6]=(w+d)*m,n[7]=0,n[8]=(y+R)*A,n[9]=(w-d)*A,n[10]=(1-(x+t))*A,n[11]=0,n[12]=e[0],n[13]=e[1],n[14]=e[2],n[15]=1,n};F.fromRotationTranslationScaleOrigin=function(n,r,e,i,c){var s=r[0],f=r[1],h=r[2],a=r[3],l=s+s,v=f+f,x=h+h,M=s*l,y=s*v,t=s*x,w=f*v,p=f*x,d=h*x,R=a*l,z=a*v,_=a*x,m=i[0],A=i[1],O=i[2],q=c[0],E=c[1],T=c[2];return n[0]=(1-(w+d))*m,n[1]=(y+_)*m,n[2]=(t-z)*m,n[3]=0,n[4]=(y-_)*A,n[5]=(1-(M+d))*A,n[6]=(p+R)*A,n[7]=0,n[8]=(t+z)*O,n[9]=(p-R)*O,n[10]=(1-(M+w))*O,n[11]=0,n[12]=e[0]+q-(n[0]*q+n[4]*E+n[8]*T),n[13]=e[1]+E-(n[1]*q+n[5]*E+n[9]*T),n[14]=e[2]+T-(n[2]*q+n[6]*E+n[10]*T),n[15]=1,n};F.fromQuat=function(n,r){var e=r[0],i=r[1],c=r[2],s=r[3],f=e+e,h=i+i,a=c+c,l=e*f,v=i*f,x=i*h,M=c*f,y=c*h,t=c*a,w=s*f,p=s*h,d=s*a;return n[0]=1-x-t,n[1]=v+d,n[2]=M-p,n[3]=0,n[4]=v-d,n[5]=1-l-t,n[6]=y+w,n[7]=0,n[8]=M+p,n[9]=y-w,n[10]=1-l-x,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,n};F.frustum=function(n,r,e,i,c,s,f){var h=1/(e-r),a=1/(c-i),l=1/(s-f);return n[0]=s*2*h,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=s*2*a,n[6]=0,n[7]=0,n[8]=(e+r)*h,n[9]=(c+i)*a,n[10]=(f+s)*l,n[11]=-1,n[12]=0,n[13]=0,n[14]=f*s*2*l,n[15]=0,n};F.perspective=function(n,r,e,i,c){var s=1/Math.tan(r/2),f=1/(i-c);return n[0]=s/e,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=s,n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[10]=(c+i)*f,n[11]=-1,n[12]=0,n[13]=0,n[14]=2*c*i*f,n[15]=0,n};F.perspectiveFromFieldOfView=function(n,r,e,i){var c=Math.tan(r.upDegrees*Math.PI/180),s=Math.tan(r.downDegrees*Math.PI/180),f=Math.tan(r.leftDegrees*Math.PI/180),h=Math.tan(r.rightDegrees*Math.PI/180),a=2/(f+h),l=2/(c+s);return n[0]=a,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=l,n[6]=0,n[7]=0,n[8]=-((f-h)*a*.5),n[9]=(c-s)*l*.5,n[10]=i/(e-i),n[11]=-1,n[12]=0,n[13]=0,n[14]=i*e/(e-i),n[15]=0,n};F.ortho=function(n,r,e,i,c,s,f){var h=1/(r-e),a=1/(i-c),l=1/(s-f);return n[0]=-2*h,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=-2*a,n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[10]=2*l,n[11]=0,n[12]=(r+e)*h,n[13]=(c+i)*a,n[14]=(f+s)*l,n[15]=1,n};F.lookAt=function(n,r,e,i){var c,s,f,h,a,l,v,x,M,y,t=r[0],w=r[1],p=r[2],d=i[0],R=i[1],z=i[2],_=e[0],m=e[1],A=e[2];return Math.abs(t-_)<s1.EPSILON&&Math.abs(w-m)<s1.EPSILON&&Math.abs(p-A)<s1.EPSILON?F.identity(n):(v=t-_,x=w-m,M=p-A,y=1/Math.sqrt(v*v+x*x+M*M),v*=y,x*=y,M*=y,c=R*M-z*x,s=z*v-d*M,f=d*x-R*v,y=Math.sqrt(c*c+s*s+f*f),y?(y=1/y,c*=y,s*=y,f*=y):(c=0,s=0,f=0),h=x*f-M*s,a=M*c-v*f,l=v*s-x*c,y=Math.sqrt(h*h+a*a+l*l),y?(y=1/y,h*=y,a*=y,l*=y):(h=0,a=0,l=0),n[0]=c,n[1]=h,n[2]=v,n[3]=0,n[4]=s,n[5]=a,n[6]=x,n[7]=0,n[8]=f,n[9]=l,n[10]=M,n[11]=0,n[12]=-(c*t+s*w+f*p),n[13]=-(h*t+a*w+l*p),n[14]=-(v*t+x*w+M*p),n[15]=1,n)};F.str=function(n){return"mat4("+n[0]+", "+n[1]+", "+n[2]+", "+n[3]+", "+n[4]+", "+n[5]+", "+n[6]+", "+n[7]+", "+n[8]+", "+n[9]+", "+n[10]+", "+n[11]+", "+n[12]+", "+n[13]+", "+n[14]+", "+n[15]+")"};F.frob=function(n){return Math.sqrt(Math.pow(n[0],2)+Math.pow(n[1],2)+Math.pow(n[2],2)+Math.pow(n[3],2)+Math.pow(n[4],2)+Math.pow(n[5],2)+Math.pow(n[6],2)+Math.pow(n[7],2)+Math.pow(n[8],2)+Math.pow(n[9],2)+Math.pow(n[10],2)+Math.pow(n[11],2)+Math.pow(n[12],2)+Math.pow(n[13],2)+Math.pow(n[14],2)+Math.pow(n[15],2))};var O1=F,y1=r1,Y={};Y.create=function(){var n=new y1.ARRAY_TYPE(3);return n[0]=0,n[1]=0,n[2]=0,n};Y.clone=function(n){var r=new y1.ARRAY_TYPE(3);return r[0]=n[0],r[1]=n[1],r[2]=n[2],r};Y.fromValues=function(n,r,e){var i=new y1.ARRAY_TYPE(3);return i[0]=n,i[1]=r,i[2]=e,i};Y.copy=function(n,r){return n[0]=r[0],n[1]=r[1],n[2]=r[2],n};Y.set=function(n,r,e,i){return n[0]=r,n[1]=e,n[2]=i,n};Y.add=function(n,r,e){return n[0]=r[0]+e[0],n[1]=r[1]+e[1],n[2]=r[2]+e[2],n};Y.subtract=function(n,r,e){return n[0]=r[0]-e[0],n[1]=r[1]-e[1],n[2]=r[2]-e[2],n};Y.sub=Y.subtract;Y.multiply=function(n,r,e){return n[0]=r[0]*e[0],n[1]=r[1]*e[1],n[2]=r[2]*e[2],n};Y.mul=Y.multiply;Y.divide=function(n,r,e){return n[0]=r[0]/e[0],n[1]=r[1]/e[1],n[2]=r[2]/e[2],n};Y.div=Y.divide;Y.min=function(n,r,e){return n[0]=Math.min(r[0],e[0]),n[1]=Math.min(r[1],e[1]),n[2]=Math.min(r[2],e[2]),n};Y.max=function(n,r,e){return n[0]=Math.max(r[0],e[0]),n[1]=Math.max(r[1],e[1]),n[2]=Math.max(r[2],e[2]),n};Y.scale=function(n,r,e){return n[0]=r[0]*e,n[1]=r[1]*e,n[2]=r[2]*e,n};Y.scaleAndAdd=function(n,r,e,i){return n[0]=r[0]+e[0]*i,n[1]=r[1]+e[1]*i,n[2]=r[2]+e[2]*i,n};Y.distance=function(n,r){var e=r[0]-n[0],i=r[1]-n[1],c=r[2]-n[2];return Math.sqrt(e*e+i*i+c*c)};Y.dist=Y.distance;Y.squaredDistance=function(n,r){var e=r[0]-n[0],i=r[1]-n[1],c=r[2]-n[2];return e*e+i*i+c*c};Y.sqrDist=Y.squaredDistance;Y.length=function(n){var r=n[0],e=n[1],i=n[2];return Math.sqrt(r*r+e*e+i*i)};Y.len=Y.length;Y.squaredLength=function(n){var r=n[0],e=n[1],i=n[2];return r*r+e*e+i*i};Y.sqrLen=Y.squaredLength;Y.negate=function(n,r){return n[0]=-r[0],n[1]=-r[1],n[2]=-r[2],n};Y.inverse=function(n,r){return n[0]=1/r[0],n[1]=1/r[1],n[2]=1/r[2],n};Y.normalize=function(n,r){var e=r[0],i=r[1],c=r[2],s=e*e+i*i+c*c;return s>0&&(s=1/Math.sqrt(s),n[0]=r[0]*s,n[1]=r[1]*s,n[2]=r[2]*s),n};Y.dot=function(n,r){return n[0]*r[0]+n[1]*r[1]+n[2]*r[2]};Y.cross=function(n,r,e){var i=r[0],c=r[1],s=r[2],f=e[0],h=e[1],a=e[2];return n[0]=c*a-s*h,n[1]=s*f-i*a,n[2]=i*h-c*f,n};Y.lerp=function(n,r,e,i){var c=r[0],s=r[1],f=r[2];return n[0]=c+i*(e[0]-c),n[1]=s+i*(e[1]-s),n[2]=f+i*(e[2]-f),n};Y.hermite=function(n,r,e,i,c,s){var f=s*s,h=f*(2*s-3)+1,a=f*(s-2)+s,l=f*(s-1),v=f*(3-2*s);return n[0]=r[0]*h+e[0]*a+i[0]*l+c[0]*v,n[1]=r[1]*h+e[1]*a+i[1]*l+c[1]*v,n[2]=r[2]*h+e[2]*a+i[2]*l+c[2]*v,n};Y.bezier=function(n,r,e,i,c,s){var f=1-s,h=f*f,a=s*s,l=h*f,v=3*s*h,x=3*a*f,M=a*s;return n[0]=r[0]*l+e[0]*v+i[0]*x+c[0]*M,n[1]=r[1]*l+e[1]*v+i[1]*x+c[1]*M,n[2]=r[2]*l+e[2]*v+i[2]*x+c[2]*M,n};Y.random=function(n,r){r=r||1;var e=y1.RANDOM()*2*Math.PI,i=y1.RANDOM()*2-1,c=Math.sqrt(1-i*i)*r;return n[0]=Math.cos(e)*c,n[1]=Math.sin(e)*c,n[2]=i*r,n};Y.transformMat4=function(n,r,e){var i=r[0],c=r[1],s=r[2],f=e[3]*i+e[7]*c+e[11]*s+e[15];return f=f||1,n[0]=(e[0]*i+e[4]*c+e[8]*s+e[12])/f,n[1]=(e[1]*i+e[5]*c+e[9]*s+e[13])/f,n[2]=(e[2]*i+e[6]*c+e[10]*s+e[14])/f,n};Y.transformMat3=function(n,r,e){var i=r[0],c=r[1],s=r[2];return n[0]=i*e[0]+c*e[3]+s*e[6],n[1]=i*e[1]+c*e[4]+s*e[7],n[2]=i*e[2]+c*e[5]+s*e[8],n};Y.transformQuat=function(n,r,e){var i=r[0],c=r[1],s=r[2],f=e[0],h=e[1],a=e[2],l=e[3],v=l*i+h*s-a*c,x=l*c+a*i-f*s,M=l*s+f*c-h*i,y=-f*i-h*c-a*s;return n[0]=v*l+y*-f+x*-a-M*-h,n[1]=x*l+y*-h+M*-f-v*-a,n[2]=M*l+y*-a+v*-h-x*-f,n};Y.rotateX=function(n,r,e,i){var c=[],s=[];return c[0]=r[0]-e[0],c[1]=r[1]-e[1],c[2]=r[2]-e[2],s[0]=c[0],s[1]=c[1]*Math.cos(i)-c[2]*Math.sin(i),s[2]=c[1]*Math.sin(i)+c[2]*Math.cos(i),n[0]=s[0]+e[0],n[1]=s[1]+e[1],n[2]=s[2]+e[2],n};Y.rotateY=function(n,r,e,i){var c=[],s=[];return c[0]=r[0]-e[0],c[1]=r[1]-e[1],c[2]=r[2]-e[2],s[0]=c[2]*Math.sin(i)+c[0]*Math.cos(i),s[1]=c[1],s[2]=c[2]*Math.cos(i)-c[0]*Math.sin(i),n[0]=s[0]+e[0],n[1]=s[1]+e[1],n[2]=s[2]+e[2],n};Y.rotateZ=function(n,r,e,i){var c=[],s=[];return c[0]=r[0]-e[0],c[1]=r[1]-e[1],c[2]=r[2]-e[2],s[0]=c[0]*Math.cos(i)-c[1]*Math.sin(i),s[1]=c[0]*Math.sin(i)+c[1]*Math.cos(i),s[2]=c[2],n[0]=s[0]+e[0],n[1]=s[1]+e[1],n[2]=s[2]+e[2],n};Y.forEach=function(){var n=Y.create();return function(r,e,i,c,s,f){var h,a;for(e||(e=3),i||(i=0),c?a=Math.min(c*e+i,r.length):a=r.length,h=i;h<a;h+=e)n[0]=r[h],n[1]=r[h+1],n[2]=r[h+2],s(n,n,f),r[h]=n[0],r[h+1]=n[1],r[h+2]=n[2];return r}}();Y.angle=function(n,r){var e=Y.fromValues(n[0],n[1],n[2]),i=Y.fromValues(r[0],r[1],r[2]);Y.normalize(e,e),Y.normalize(i,i);var c=Y.dot(e,i);return c>1?0:Math.acos(c)};Y.str=function(n){return"vec3("+n[0]+", "+n[1]+", "+n[2]+")"};var Y1=Y,i1=r1,D={};D.create=function(){var n=new i1.ARRAY_TYPE(4);return n[0]=0,n[1]=0,n[2]=0,n[3]=0,n};D.clone=function(n){var r=new i1.ARRAY_TYPE(4);return r[0]=n[0],r[1]=n[1],r[2]=n[2],r[3]=n[3],r};D.fromValues=function(n,r,e,i){var c=new i1.ARRAY_TYPE(4);return c[0]=n,c[1]=r,c[2]=e,c[3]=i,c};D.copy=function(n,r){return n[0]=r[0],n[1]=r[1],n[2]=r[2],n[3]=r[3],n};D.set=function(n,r,e,i,c){return n[0]=r,n[1]=e,n[2]=i,n[3]=c,n};D.add=function(n,r,e){return n[0]=r[0]+e[0],n[1]=r[1]+e[1],n[2]=r[2]+e[2],n[3]=r[3]+e[3],n};D.subtract=function(n,r,e){return n[0]=r[0]-e[0],n[1]=r[1]-e[1],n[2]=r[2]-e[2],n[3]=r[3]-e[3],n};D.sub=D.subtract;D.multiply=function(n,r,e){return n[0]=r[0]*e[0],n[1]=r[1]*e[1],n[2]=r[2]*e[2],n[3]=r[3]*e[3],n};D.mul=D.multiply;D.divide=function(n,r,e){return n[0]=r[0]/e[0],n[1]=r[1]/e[1],n[2]=r[2]/e[2],n[3]=r[3]/e[3],n};D.div=D.divide;D.min=function(n,r,e){return n[0]=Math.min(r[0],e[0]),n[1]=Math.min(r[1],e[1]),n[2]=Math.min(r[2],e[2]),n[3]=Math.min(r[3],e[3]),n};D.max=function(n,r,e){return n[0]=Math.max(r[0],e[0]),n[1]=Math.max(r[1],e[1]),n[2]=Math.max(r[2],e[2]),n[3]=Math.max(r[3],e[3]),n};D.scale=function(n,r,e){return n[0]=r[0]*e,n[1]=r[1]*e,n[2]=r[2]*e,n[3]=r[3]*e,n};D.scaleAndAdd=function(n,r,e,i){return n[0]=r[0]+e[0]*i,n[1]=r[1]+e[1]*i,n[2]=r[2]+e[2]*i,n[3]=r[3]+e[3]*i,n};D.distance=function(n,r){var e=r[0]-n[0],i=r[1]-n[1],c=r[2]-n[2],s=r[3]-n[3];return Math.sqrt(e*e+i*i+c*c+s*s)};D.dist=D.distance;D.squaredDistance=function(n,r){var e=r[0]-n[0],i=r[1]-n[1],c=r[2]-n[2],s=r[3]-n[3];return e*e+i*i+c*c+s*s};D.sqrDist=D.squaredDistance;D.length=function(n){var r=n[0],e=n[1],i=n[2],c=n[3];return Math.sqrt(r*r+e*e+i*i+c*c)};D.len=D.length;D.squaredLength=function(n){var r=n[0],e=n[1],i=n[2],c=n[3];return r*r+e*e+i*i+c*c};D.sqrLen=D.squaredLength;D.negate=function(n,r){return n[0]=-r[0],n[1]=-r[1],n[2]=-r[2],n[3]=-r[3],n};D.inverse=function(n,r){return n[0]=1/r[0],n[1]=1/r[1],n[2]=1/r[2],n[3]=1/r[3],n};D.normalize=function(n,r){var e=r[0],i=r[1],c=r[2],s=r[3],f=e*e+i*i+c*c+s*s;return f>0&&(f=1/Math.sqrt(f),n[0]=e*f,n[1]=i*f,n[2]=c*f,n[3]=s*f),n};D.dot=function(n,r){return n[0]*r[0]+n[1]*r[1]+n[2]*r[2]+n[3]*r[3]};D.lerp=function(n,r,e,i){var c=r[0],s=r[1],f=r[2],h=r[3];return n[0]=c+i*(e[0]-c),n[1]=s+i*(e[1]-s),n[2]=f+i*(e[2]-f),n[3]=h+i*(e[3]-h),n};D.random=function(n,r){return r=r||1,n[0]=i1.RANDOM(),n[1]=i1.RANDOM(),n[2]=i1.RANDOM(),n[3]=i1.RANDOM(),D.normalize(n,n),D.scale(n,n,r),n};D.transformMat4=function(n,r,e){var i=r[0],c=r[1],s=r[2],f=r[3];return n[0]=e[0]*i+e[4]*c+e[8]*s+e[12]*f,n[1]=e[1]*i+e[5]*c+e[9]*s+e[13]*f,n[2]=e[2]*i+e[6]*c+e[10]*s+e[14]*f,n[3]=e[3]*i+e[7]*c+e[11]*s+e[15]*f,n};D.transformQuat=function(n,r,e){var i=r[0],c=r[1],s=r[2],f=e[0],h=e[1],a=e[2],l=e[3],v=l*i+h*s-a*c,x=l*c+a*i-f*s,M=l*s+f*c-h*i,y=-f*i-h*c-a*s;return n[0]=v*l+y*-f+x*-a-M*-h,n[1]=x*l+y*-h+M*-f-v*-a,n[2]=M*l+y*-a+v*-h-x*-f,n[3]=r[3],n};D.forEach=function(){var n=D.create();return function(r,e,i,c,s,f){var h,a;for(e||(e=4),i||(i=0),c?a=Math.min(c*e+i,r.length):a=r.length,h=i;h<a;h+=e)n[0]=r[h],n[1]=r[h+1],n[2]=r[h+2],n[3]=r[h+3],s(n,n,f),r[h]=n[0],r[h+1]=n[1],r[h+2]=n[2],r[h+3]=n[3];return r}}();D.str=function(n){return"vec4("+n[0]+", "+n[1]+", "+n[2]+", "+n[3]+")"};var I1=D,S1=r1,N1=V1,o=Y1,U=I1,S={};S.create=function(){var n=new S1.ARRAY_TYPE(4);return n[0]=0,n[1]=0,n[2]=0,n[3]=1,n};S.rotationTo=function(){var n=o.create(),r=o.fromValues(1,0,0),e=o.fromValues(0,1,0);return function(i,c,s){var f=o.dot(c,s);return f<-.999999?(o.cross(n,r,c),o.length(n)<1e-6&&o.cross(n,e,c),o.normalize(n,n),S.setAxisAngle(i,n,Math.PI),i):f>.999999?(i[0]=0,i[1]=0,i[2]=0,i[3]=1,i):(o.cross(n,c,s),i[0]=n[0],i[1]=n[1],i[2]=n[2],i[3]=1+f,S.normalize(i,i))}}();S.setAxes=function(){var n=N1.create();return function(r,e,i,c){return n[0]=i[0],n[3]=i[1],n[6]=i[2],n[1]=c[0],n[4]=c[1],n[7]=c[2],n[2]=-e[0],n[5]=-e[1],n[8]=-e[2],S.normalize(r,S.fromMat3(r,n))}}();S.clone=U.clone;S.fromValues=U.fromValues;S.copy=U.copy;S.set=U.set;S.identity=function(n){return n[0]=0,n[1]=0,n[2]=0,n[3]=1,n};S.setAxisAngle=function(n,r,e){e=e*.5;var i=Math.sin(e);return n[0]=i*r[0],n[1]=i*r[1],n[2]=i*r[2],n[3]=Math.cos(e),n};S.add=U.add;S.multiply=function(n,r,e){var i=r[0],c=r[1],s=r[2],f=r[3],h=e[0],a=e[1],l=e[2],v=e[3];return n[0]=i*v+f*h+c*l-s*a,n[1]=c*v+f*a+s*h-i*l,n[2]=s*v+f*l+i*a-c*h,n[3]=f*v-i*h-c*a-s*l,n};S.mul=S.multiply;S.scale=U.scale;S.rotateX=function(n,r,e){e*=.5;var i=r[0],c=r[1],s=r[2],f=r[3],h=Math.sin(e),a=Math.cos(e);return n[0]=i*a+f*h,n[1]=c*a+s*h,n[2]=s*a-c*h,n[3]=f*a-i*h,n};S.rotateY=function(n,r,e){e*=.5;var i=r[0],c=r[1],s=r[2],f=r[3],h=Math.sin(e),a=Math.cos(e);return n[0]=i*a-s*h,n[1]=c*a+f*h,n[2]=s*a+i*h,n[3]=f*a-c*h,n};S.rotateZ=function(n,r,e){e*=.5;var i=r[0],c=r[1],s=r[2],f=r[3],h=Math.sin(e),a=Math.cos(e);return n[0]=i*a+c*h,n[1]=c*a-i*h,n[2]=s*a+f*h,n[3]=f*a-s*h,n};S.calculateW=function(n,r){var e=r[0],i=r[1],c=r[2];return n[0]=e,n[1]=i,n[2]=c,n[3]=Math.sqrt(Math.abs(1-e*e-i*i-c*c)),n};S.dot=U.dot;S.lerp=U.lerp;S.slerp=function(n,r,e,i){var c=r[0],s=r[1],f=r[2],h=r[3],a=e[0],l=e[1],v=e[2],x=e[3],M,y,t,w,p;return y=c*a+s*l+f*v+h*x,y<0&&(y=-y,a=-a,l=-l,v=-v,x=-x),1-y>1e-6?(M=Math.acos(y),t=Math.sin(M),w=Math.sin((1-i)*M)/t,p=Math.sin(i*M)/t):(w=1-i,p=i),n[0]=w*c+p*a,n[1]=w*s+p*l,n[2]=w*f+p*v,n[3]=w*h+p*x,n};S.sqlerp=function(){var n=S.create(),r=S.create();return function(e,i,c,s,f,h){return S.slerp(n,i,f,h),S.slerp(r,c,s,h),S.slerp(e,n,r,2*h*(1-h)),e}}();S.invert=function(n,r){var e=r[0],i=r[1],c=r[2],s=r[3],f=e*e+i*i+c*c+s*s,h=f?1/f:0;return n[0]=-e*h,n[1]=-i*h,n[2]=-c*h,n[3]=s*h,n};S.conjugate=function(n,r){return n[0]=-r[0],n[1]=-r[1],n[2]=-r[2],n[3]=r[3],n};S.length=U.length;S.len=S.length;S.squaredLength=U.squaredLength;S.sqrLen=S.squaredLength;S.normalize=U.normalize;S.fromMat3=function(n,r){var e=r[0]+r[4]+r[8],i;if(e>0)i=Math.sqrt(e+1),n[3]=.5*i,i=.5/i,n[0]=(r[5]-r[7])*i,n[1]=(r[6]-r[2])*i,n[2]=(r[1]-r[3])*i;else{var c=0;r[4]>r[0]&&(c=1),r[8]>r[c*3+c]&&(c=2);var s=(c+1)%3,f=(c+2)%3;i=Math.sqrt(r[c*3+c]-r[s*3+s]-r[f*3+f]+1),n[c]=.5*i,i=.5/i,n[3]=(r[s*3+f]-r[f*3+s])*i,n[s]=(r[s*3+c]+r[c*3+s])*i,n[f]=(r[f*3+c]+r[c*3+f])*i}return n};S.str=function(n){return"quat("+n[0]+", "+n[1]+", "+n[2]+", "+n[3]+")"};var p1=r1,L={};L.create=function(){var n=new p1.ARRAY_TYPE(2);return n[0]=0,n[1]=0,n};L.clone=function(n){var r=new p1.ARRAY_TYPE(2);return r[0]=n[0],r[1]=n[1],r};L.fromValues=function(n,r){var e=new p1.ARRAY_TYPE(2);return e[0]=n,e[1]=r,e};L.copy=function(n,r){return n[0]=r[0],n[1]=r[1],n};L.set=function(n,r,e){return n[0]=r,n[1]=e,n};L.add=function(n,r,e){return n[0]=r[0]+e[0],n[1]=r[1]+e[1],n};L.subtract=function(n,r,e){return n[0]=r[0]-e[0],n[1]=r[1]-e[1],n};L.sub=L.subtract;L.multiply=function(n,r,e){return n[0]=r[0]*e[0],n[1]=r[1]*e[1],n};L.mul=L.multiply;L.divide=function(n,r,e){return n[0]=r[0]/e[0],n[1]=r[1]/e[1],n};L.div=L.divide;L.min=function(n,r,e){return n[0]=Math.min(r[0],e[0]),n[1]=Math.min(r[1],e[1]),n};L.max=function(n,r,e){return n[0]=Math.max(r[0],e[0]),n[1]=Math.max(r[1],e[1]),n};L.scale=function(n,r,e){return n[0]=r[0]*e,n[1]=r[1]*e,n};L.scaleAndAdd=function(n,r,e,i){return n[0]=r[0]+e[0]*i,n[1]=r[1]+e[1]*i,n};L.distance=function(n,r){var e=r[0]-n[0],i=r[1]-n[1];return Math.sqrt(e*e+i*i)};L.dist=L.distance;L.squaredDistance=function(n,r){var e=r[0]-n[0],i=r[1]-n[1];return e*e+i*i};L.sqrDist=L.squaredDistance;L.length=function(n){var r=n[0],e=n[1];return Math.sqrt(r*r+e*e)};L.len=L.length;L.squaredLength=function(n){var r=n[0],e=n[1];return r*r+e*e};L.sqrLen=L.squaredLength;L.negate=function(n,r){return n[0]=-r[0],n[1]=-r[1],n};L.inverse=function(n,r){return n[0]=1/r[0],n[1]=1/r[1],n};L.normalize=function(n,r){var e=r[0],i=r[1],c=e*e+i*i;return c>0&&(c=1/Math.sqrt(c),n[0]=r[0]*c,n[1]=r[1]*c),n};L.dot=function(n,r){return n[0]*r[0]+n[1]*r[1]};L.cross=function(n,r,e){var i=r[0]*e[1]-r[1]*e[0];return n[0]=n[1]=0,n[2]=i,n};L.lerp=function(n,r,e,i){var c=r[0],s=r[1];return n[0]=c+i*(e[0]-c),n[1]=s+i*(e[1]-s),n};L.random=function(n,r){r=r||1;var e=p1.RANDOM()*2*Math.PI;return n[0]=Math.cos(e)*r,n[1]=Math.sin(e)*r,n};L.transformMat2=function(n,r,e){var i=r[0],c=r[1];return n[0]=e[0]*i+e[2]*c,n[1]=e[1]*i+e[3]*c,n};L.transformMat2d=function(n,r,e){var i=r[0],c=r[1];return n[0]=e[0]*i+e[2]*c+e[4],n[1]=e[1]*i+e[3]*c+e[5],n};L.transformMat3=function(n,r,e){var i=r[0],c=r[1];return n[0]=e[0]*i+e[3]*c+e[6],n[1]=e[1]*i+e[4]*c+e[7],n};L.transformMat4=function(n,r,e){var i=r[0],c=r[1];return n[0]=e[0]*i+e[4]*c+e[12],n[1]=e[1]*i+e[5]*c+e[13],n};L.forEach=function(){var n=L.create();return function(r,e,i,c,s,f){var h,a;for(e||(e=2),i||(i=0),c?a=Math.min(c*e+i,r.length):a=r.length,h=i;h<a;h+=e)n[0]=r[h],n[1]=r[h+1],s(n,n,f),r[h]=n[0],r[h+1]=n[1];return r}}();L.str=function(n){return"vec2("+n[0]+", "+n[1]+")"};var J=O1,F1=Y1,v1={};v1.EPSILON=1e-6;v1.ARRAY_TYPE=typeof Float32Array<"u"?Float32Array:Array;v1.RANDOM=Math.random;v1.setMatrixArrayType=function(n){GLMAT_ARRAY_TYPE=n};var W1=Math.PI/180;v1.toRadian=function(n){return n*W1};var e1=v1,P1=e1,C={};C.create=function(){var n=new P1.ARRAY_TYPE(4);return n[0]=1,n[1]=0,n[2]=0,n[3]=1,n};C.clone=function(n){var r=new P1.ARRAY_TYPE(4);return r[0]=n[0],r[1]=n[1],r[2]=n[2],r[3]=n[3],r};C.copy=function(n,r){return n[0]=r[0],n[1]=r[1],n[2]=r[2],n[3]=r[3],n};C.identity=function(n){return n[0]=1,n[1]=0,n[2]=0,n[3]=1,n};C.transpose=function(n,r){if(n===r){var e=r[1];n[1]=r[2],n[2]=e}else n[0]=r[0],n[1]=r[2],n[2]=r[1],n[3]=r[3];return n};C.invert=function(n,r){var e=r[0],i=r[1],c=r[2],s=r[3],f=e*s-c*i;return f?(f=1/f,n[0]=s*f,n[1]=-i*f,n[2]=-c*f,n[3]=e*f,n):null};C.adjoint=function(n,r){var e=r[0];return n[0]=r[3],n[1]=-r[1],n[2]=-r[2],n[3]=e,n};C.determinant=function(n){return n[0]*n[3]-n[2]*n[1]};C.multiply=function(n,r,e){var i=r[0],c=r[1],s=r[2],f=r[3],h=e[0],a=e[1],l=e[2],v=e[3];return n[0]=i*h+s*a,n[1]=c*h+f*a,n[2]=i*l+s*v,n[3]=c*l+f*v,n};C.mul=C.multiply;C.rotate=function(n,r,e){var i=r[0],c=r[1],s=r[2],f=r[3],h=Math.sin(e),a=Math.cos(e);return n[0]=i*a+s*h,n[1]=c*a+f*h,n[2]=i*-h+s*a,n[3]=c*-h+f*a,n};C.scale=function(n,r,e){var i=r[0],c=r[1],s=r[2],f=r[3],h=e[0],a=e[1];return n[0]=i*h,n[1]=c*h,n[2]=s*a,n[3]=f*a,n};C.fromRotation=function(n,r){var e=Math.sin(r),i=Math.cos(r);return n[0]=i,n[1]=e,n[2]=-e,n[3]=i,n};C.fromScaling=function(n,r){return n[0]=r[0],n[1]=0,n[2]=0,n[3]=r[1],n};C.str=function(n){return"mat2("+n[0]+", "+n[1]+", "+n[2]+", "+n[3]+")"};C.frob=function(n){return Math.sqrt(Math.pow(n[0],2)+Math.pow(n[1],2)+Math.pow(n[2],2)+Math.pow(n[3],2))};C.LDU=function(n,r,e,i){return n[2]=i[2]/i[0],e[0]=i[0],e[1]=i[1],e[3]=i[3]-n[2]*e[1],[n,r,e]};var T1=e1,H={};H.create=function(){var n=new T1.ARRAY_TYPE(6);return n[0]=1,n[1]=0,n[2]=0,n[3]=1,n[4]=0,n[5]=0,n};H.clone=function(n){var r=new T1.ARRAY_TYPE(6);return r[0]=n[0],r[1]=n[1],r[2]=n[2],r[3]=n[3],r[4]=n[4],r[5]=n[5],r};H.copy=function(n,r){return n[0]=r[0],n[1]=r[1],n[2]=r[2],n[3]=r[3],n[4]=r[4],n[5]=r[5],n};H.identity=function(n){return n[0]=1,n[1]=0,n[2]=0,n[3]=1,n[4]=0,n[5]=0,n};H.invert=function(n,r){var e=r[0],i=r[1],c=r[2],s=r[3],f=r[4],h=r[5],a=e*s-i*c;return a?(a=1/a,n[0]=s*a,n[1]=-i*a,n[2]=-c*a,n[3]=e*a,n[4]=(c*h-s*f)*a,n[5]=(i*f-e*h)*a,n):null};H.determinant=function(n){return n[0]*n[3]-n[1]*n[2]};H.multiply=function(n,r,e){var i=r[0],c=r[1],s=r[2],f=r[3],h=r[4],a=r[5],l=e[0],v=e[1],x=e[2],M=e[3],y=e[4],t=e[5];return n[0]=i*l+s*v,n[1]=c*l+f*v,n[2]=i*x+s*M,n[3]=c*x+f*M,n[4]=i*y+s*t+h,n[5]=c*y+f*t+a,n};H.mul=H.multiply;H.rotate=function(n,r,e){var i=r[0],c=r[1],s=r[2],f=r[3],h=r[4],a=r[5],l=Math.sin(e),v=Math.cos(e);return n[0]=i*v+s*l,n[1]=c*v+f*l,n[2]=i*-l+s*v,n[3]=c*-l+f*v,n[4]=h,n[5]=a,n};H.scale=function(n,r,e){var i=r[0],c=r[1],s=r[2],f=r[3],h=r[4],a=r[5],l=e[0],v=e[1];return n[0]=i*l,n[1]=c*l,n[2]=s*v,n[3]=f*v,n[4]=h,n[5]=a,n};H.translate=function(n,r,e){var i=r[0],c=r[1],s=r[2],f=r[3],h=r[4],a=r[5],l=e[0],v=e[1];return n[0]=i,n[1]=c,n[2]=s,n[3]=f,n[4]=i*l+s*v+h,n[5]=c*l+f*v+a,n};H.fromRotation=function(n,r){var e=Math.sin(r),i=Math.cos(r);return n[0]=i,n[1]=e,n[2]=-e,n[3]=i,n[4]=0,n[5]=0,n};H.fromScaling=function(n,r){return n[0]=r[0],n[1]=0,n[2]=0,n[3]=r[1],n[4]=0,n[5]=0,n};H.fromTranslation=function(n,r){return n[0]=1,n[1]=0,n[2]=0,n[3]=1,n[4]=r[0],n[5]=r[1],n};H.str=function(n){return"mat2d("+n[0]+", "+n[1]+", "+n[2]+", "+n[3]+", "+n[4]+", "+n[5]+")"};H.frob=function(n){return Math.sqrt(Math.pow(n[0],2)+Math.pow(n[1],2)+Math.pow(n[2],2)+Math.pow(n[3],2)+Math.pow(n[4],2)+Math.pow(n[5],2)+1)};var q1=e1,Q={};Q.create=function(){var n=new q1.ARRAY_TYPE(9);return n[0]=1,n[1]=0,n[2]=0,n[3]=0,n[4]=1,n[5]=0,n[6]=0,n[7]=0,n[8]=1,n};Q.fromMat4=function(n,r){return n[0]=r[0],n[1]=r[1],n[2]=r[2],n[3]=r[4],n[4]=r[5],n[5]=r[6],n[6]=r[8],n[7]=r[9],n[8]=r[10],n};Q.clone=function(n){var r=new q1.ARRAY_TYPE(9);return r[0]=n[0],r[1]=n[1],r[2]=n[2],r[3]=n[3],r[4]=n[4],r[5]=n[5],r[6]=n[6],r[7]=n[7],r[8]=n[8],r};Q.copy=function(n,r){return n[0]=r[0],n[1]=r[1],n[2]=r[2],n[3]=r[3],n[4]=r[4],n[5]=r[5],n[6]=r[6],n[7]=r[7],n[8]=r[8],n};Q.identity=function(n){return n[0]=1,n[1]=0,n[2]=0,n[3]=0,n[4]=1,n[5]=0,n[6]=0,n[7]=0,n[8]=1,n};Q.transpose=function(n,r){if(n===r){var e=r[1],i=r[2],c=r[5];n[1]=r[3],n[2]=r[6],n[3]=e,n[5]=r[7],n[6]=i,n[7]=c}else n[0]=r[0],n[1]=r[3],n[2]=r[6],n[3]=r[1],n[4]=r[4],n[5]=r[7],n[6]=r[2],n[7]=r[5],n[8]=r[8];return n};Q.invert=function(n,r){var e=r[0],i=r[1],c=r[2],s=r[3],f=r[4],h=r[5],a=r[6],l=r[7],v=r[8],x=v*f-h*l,M=-v*s+h*a,y=l*s-f*a,t=e*x+i*M+c*y;return t?(t=1/t,n[0]=x*t,n[1]=(-v*i+c*l)*t,n[2]=(h*i-c*f)*t,n[3]=M*t,n[4]=(v*e-c*a)*t,n[5]=(-h*e+c*s)*t,n[6]=y*t,n[7]=(-l*e+i*a)*t,n[8]=(f*e-i*s)*t,n):null};Q.adjoint=function(n,r){var e=r[0],i=r[1],c=r[2],s=r[3],f=r[4],h=r[5],a=r[6],l=r[7],v=r[8];return n[0]=f*v-h*l,n[1]=c*l-i*v,n[2]=i*h-c*f,n[3]=h*a-s*v,n[4]=e*v-c*a,n[5]=c*s-e*h,n[6]=s*l-f*a,n[7]=i*a-e*l,n[8]=e*f-i*s,n};Q.determinant=function(n){var r=n[0],e=n[1],i=n[2],c=n[3],s=n[4],f=n[5],h=n[6],a=n[7],l=n[8];return r*(l*s-f*a)+e*(-l*c+f*h)+i*(a*c-s*h)};Q.multiply=function(n,r,e){var i=r[0],c=r[1],s=r[2],f=r[3],h=r[4],a=r[5],l=r[6],v=r[7],x=r[8],M=e[0],y=e[1],t=e[2],w=e[3],p=e[4],d=e[5],R=e[6],z=e[7],_=e[8];return n[0]=M*i+y*f+t*l,n[1]=M*c+y*h+t*v,n[2]=M*s+y*a+t*x,n[3]=w*i+p*f+d*l,n[4]=w*c+p*h+d*v,n[5]=w*s+p*a+d*x,n[6]=R*i+z*f+_*l,n[7]=R*c+z*h+_*v,n[8]=R*s+z*a+_*x,n};Q.mul=Q.multiply;Q.translate=function(n,r,e){var i=r[0],c=r[1],s=r[2],f=r[3],h=r[4],a=r[5],l=r[6],v=r[7],x=r[8],M=e[0],y=e[1];return n[0]=i,n[1]=c,n[2]=s,n[3]=f,n[4]=h,n[5]=a,n[6]=M*i+y*f+l,n[7]=M*c+y*h+v,n[8]=M*s+y*a+x,n};Q.rotate=function(n,r,e){var i=r[0],c=r[1],s=r[2],f=r[3],h=r[4],a=r[5],l=r[6],v=r[7],x=r[8],M=Math.sin(e),y=Math.cos(e);return n[0]=y*i+M*f,n[1]=y*c+M*h,n[2]=y*s+M*a,n[3]=y*f-M*i,n[4]=y*h-M*c,n[5]=y*a-M*s,n[6]=l,n[7]=v,n[8]=x,n};Q.scale=function(n,r,e){var i=e[0],c=e[1];return n[0]=i*r[0],n[1]=i*r[1],n[2]=i*r[2],n[3]=c*r[3],n[4]=c*r[4],n[5]=c*r[5],n[6]=r[6],n[7]=r[7],n[8]=r[8],n};Q.fromTranslation=function(n,r){return n[0]=1,n[1]=0,n[2]=0,n[3]=0,n[4]=1,n[5]=0,n[6]=r[0],n[7]=r[1],n[8]=1,n};Q.fromRotation=function(n,r){var e=Math.sin(r),i=Math.cos(r);return n[0]=i,n[1]=e,n[2]=0,n[3]=-e,n[4]=i,n[5]=0,n[6]=0,n[7]=0,n[8]=1,n};Q.fromScaling=function(n,r){return n[0]=r[0],n[1]=0,n[2]=0,n[3]=0,n[4]=r[1],n[5]=0,n[6]=0,n[7]=0,n[8]=1,n};Q.fromMat2d=function(n,r){return n[0]=r[0],n[1]=r[1],n[2]=0,n[3]=r[2],n[4]=r[3],n[5]=0,n[6]=r[4],n[7]=r[5],n[8]=1,n};Q.fromQuat=function(n,r){var e=r[0],i=r[1],c=r[2],s=r[3],f=e+e,h=i+i,a=c+c,l=e*f,v=i*f,x=i*h,M=c*f,y=c*h,t=c*a,w=s*f,p=s*h,d=s*a;return n[0]=1-x-t,n[3]=v-d,n[6]=M+p,n[1]=v+d,n[4]=1-l-t,n[7]=y-w,n[2]=M-p,n[5]=y+w,n[8]=1-l-x,n};Q.normalFromMat4=function(n,r){var e=r[0],i=r[1],c=r[2],s=r[3],f=r[4],h=r[5],a=r[6],l=r[7],v=r[8],x=r[9],M=r[10],y=r[11],t=r[12],w=r[13],p=r[14],d=r[15],R=e*h-i*f,z=e*a-c*f,_=e*l-s*f,m=i*a-c*h,A=i*l-s*h,O=c*l-s*a,q=v*w-x*t,E=v*p-M*t,T=v*d-y*t,j=x*p-M*w,N=x*d-y*w,X=M*d-y*p,g=R*X-z*N+_*j+m*T-A*E+O*q;return g?(g=1/g,n[0]=(h*X-a*N+l*j)*g,n[1]=(a*T-f*X-l*E)*g,n[2]=(f*N-h*T+l*q)*g,n[3]=(c*N-i*X-s*j)*g,n[4]=(e*X-c*T+s*E)*g,n[5]=(i*T-e*N-s*q)*g,n[6]=(w*O-p*A+d*m)*g,n[7]=(p*_-t*O-d*z)*g,n[8]=(t*A-w*_+d*R)*g,n):null};Q.str=function(n){return"mat3("+n[0]+", "+n[1]+", "+n[2]+", "+n[3]+", "+n[4]+", "+n[5]+", "+n[6]+", "+n[7]+", "+n[8]+")"};Q.frob=function(n){return Math.sqrt(Math.pow(n[0],2)+Math.pow(n[1],2)+Math.pow(n[2],2)+Math.pow(n[3],2)+Math.pow(n[4],2)+Math.pow(n[5],2)+Math.pow(n[6],2)+Math.pow(n[7],2)+Math.pow(n[8],2))};var E1=Q,f1=e1,W={};W.create=function(){var n=new f1.ARRAY_TYPE(16);return n[0]=1,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=1,n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[10]=1,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,n};W.clone=function(n){var r=new f1.ARRAY_TYPE(16);return r[0]=n[0],r[1]=n[1],r[2]=n[2],r[3]=n[3],r[4]=n[4],r[5]=n[5],r[6]=n[6],r[7]=n[7],r[8]=n[8],r[9]=n[9],r[10]=n[10],r[11]=n[11],r[12]=n[12],r[13]=n[13],r[14]=n[14],r[15]=n[15],r};W.copy=function(n,r){return n[0]=r[0],n[1]=r[1],n[2]=r[2],n[3]=r[3],n[4]=r[4],n[5]=r[5],n[6]=r[6],n[7]=r[7],n[8]=r[8],n[9]=r[9],n[10]=r[10],n[11]=r[11],n[12]=r[12],n[13]=r[13],n[14]=r[14],n[15]=r[15],n};W.identity=function(n){return n[0]=1,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=1,n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[10]=1,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,n};W.transpose=function(n,r){if(n===r){var e=r[1],i=r[2],c=r[3],s=r[6],f=r[7],h=r[11];n[1]=r[4],n[2]=r[8],n[3]=r[12],n[4]=e,n[6]=r[9],n[7]=r[13],n[8]=i,n[9]=s,n[11]=r[14],n[12]=c,n[13]=f,n[14]=h}else n[0]=r[0],n[1]=r[4],n[2]=r[8],n[3]=r[12],n[4]=r[1],n[5]=r[5],n[6]=r[9],n[7]=r[13],n[8]=r[2],n[9]=r[6],n[10]=r[10],n[11]=r[14],n[12]=r[3],n[13]=r[7],n[14]=r[11],n[15]=r[15];return n};W.invert=function(n,r){var e=r[0],i=r[1],c=r[2],s=r[3],f=r[4],h=r[5],a=r[6],l=r[7],v=r[8],x=r[9],M=r[10],y=r[11],t=r[12],w=r[13],p=r[14],d=r[15],R=e*h-i*f,z=e*a-c*f,_=e*l-s*f,m=i*a-c*h,A=i*l-s*h,O=c*l-s*a,q=v*w-x*t,E=v*p-M*t,T=v*d-y*t,j=x*p-M*w,N=x*d-y*w,X=M*d-y*p,g=R*X-z*N+_*j+m*T-A*E+O*q;return g?(g=1/g,n[0]=(h*X-a*N+l*j)*g,n[1]=(c*N-i*X-s*j)*g,n[2]=(w*O-p*A+d*m)*g,n[3]=(M*A-x*O-y*m)*g,n[4]=(a*T-f*X-l*E)*g,n[5]=(e*X-c*T+s*E)*g,n[6]=(p*_-t*O-d*z)*g,n[7]=(v*O-M*_+y*z)*g,n[8]=(f*N-h*T+l*q)*g,n[9]=(i*T-e*N-s*q)*g,n[10]=(t*A-w*_+d*R)*g,n[11]=(x*_-v*A-y*R)*g,n[12]=(h*E-f*j-a*q)*g,n[13]=(e*j-i*E+c*q)*g,n[14]=(w*z-t*m-p*R)*g,n[15]=(v*m-x*z+M*R)*g,n):null};W.adjoint=function(n,r){var e=r[0],i=r[1],c=r[2],s=r[3],f=r[4],h=r[5],a=r[6],l=r[7],v=r[8],x=r[9],M=r[10],y=r[11],t=r[12],w=r[13],p=r[14],d=r[15];return n[0]=h*(M*d-y*p)-x*(a*d-l*p)+w*(a*y-l*M),n[1]=-(i*(M*d-y*p)-x*(c*d-s*p)+w*(c*y-s*M)),n[2]=i*(a*d-l*p)-h*(c*d-s*p)+w*(c*l-s*a),n[3]=-(i*(a*y-l*M)-h*(c*y-s*M)+x*(c*l-s*a)),n[4]=-(f*(M*d-y*p)-v*(a*d-l*p)+t*(a*y-l*M)),n[5]=e*(M*d-y*p)-v*(c*d-s*p)+t*(c*y-s*M),n[6]=-(e*(a*d-l*p)-f*(c*d-s*p)+t*(c*l-s*a)),n[7]=e*(a*y-l*M)-f*(c*y-s*M)+v*(c*l-s*a),n[8]=f*(x*d-y*w)-v*(h*d-l*w)+t*(h*y-l*x),n[9]=-(e*(x*d-y*w)-v*(i*d-s*w)+t*(i*y-s*x)),n[10]=e*(h*d-l*w)-f*(i*d-s*w)+t*(i*l-s*h),n[11]=-(e*(h*y-l*x)-f*(i*y-s*x)+v*(i*l-s*h)),n[12]=-(f*(x*p-M*w)-v*(h*p-a*w)+t*(h*M-a*x)),n[13]=e*(x*p-M*w)-v*(i*p-c*w)+t*(i*M-c*x),n[14]=-(e*(h*p-a*w)-f*(i*p-c*w)+t*(i*a-c*h)),n[15]=e*(h*M-a*x)-f*(i*M-c*x)+v*(i*a-c*h),n};W.determinant=function(n){var r=n[0],e=n[1],i=n[2],c=n[3],s=n[4],f=n[5],h=n[6],a=n[7],l=n[8],v=n[9],x=n[10],M=n[11],y=n[12],t=n[13],w=n[14],p=n[15],d=r*f-e*s,R=r*h-i*s,z=r*a-c*s,_=e*h-i*f,m=e*a-c*f,A=i*a-c*h,O=l*t-v*y,q=l*w-x*y,E=l*p-M*y,T=v*w-x*t,j=v*p-M*t,N=x*p-M*w;return d*N-R*j+z*T+_*E-m*q+A*O};W.multiply=function(n,r,e){var i=r[0],c=r[1],s=r[2],f=r[3],h=r[4],a=r[5],l=r[6],v=r[7],x=r[8],M=r[9],y=r[10],t=r[11],w=r[12],p=r[13],d=r[14],R=r[15],z=e[0],_=e[1],m=e[2],A=e[3];return n[0]=z*i+_*h+m*x+A*w,n[1]=z*c+_*a+m*M+A*p,n[2]=z*s+_*l+m*y+A*d,n[3]=z*f+_*v+m*t+A*R,z=e[4],_=e[5],m=e[6],A=e[7],n[4]=z*i+_*h+m*x+A*w,n[5]=z*c+_*a+m*M+A*p,n[6]=z*s+_*l+m*y+A*d,n[7]=z*f+_*v+m*t+A*R,z=e[8],_=e[9],m=e[10],A=e[11],n[8]=z*i+_*h+m*x+A*w,n[9]=z*c+_*a+m*M+A*p,n[10]=z*s+_*l+m*y+A*d,n[11]=z*f+_*v+m*t+A*R,z=e[12],_=e[13],m=e[14],A=e[15],n[12]=z*i+_*h+m*x+A*w,n[13]=z*c+_*a+m*M+A*p,n[14]=z*s+_*l+m*y+A*d,n[15]=z*f+_*v+m*t+A*R,n};W.mul=W.multiply;W.translate=function(n,r,e){var i=e[0],c=e[1],s=e[2],f,h,a,l,v,x,M,y,t,w,p,d;return r===n?(n[12]=r[0]*i+r[4]*c+r[8]*s+r[12],n[13]=r[1]*i+r[5]*c+r[9]*s+r[13],n[14]=r[2]*i+r[6]*c+r[10]*s+r[14],n[15]=r[3]*i+r[7]*c+r[11]*s+r[15]):(f=r[0],h=r[1],a=r[2],l=r[3],v=r[4],x=r[5],M=r[6],y=r[7],t=r[8],w=r[9],p=r[10],d=r[11],n[0]=f,n[1]=h,n[2]=a,n[3]=l,n[4]=v,n[5]=x,n[6]=M,n[7]=y,n[8]=t,n[9]=w,n[10]=p,n[11]=d,n[12]=f*i+v*c+t*s+r[12],n[13]=h*i+x*c+w*s+r[13],n[14]=a*i+M*c+p*s+r[14],n[15]=l*i+y*c+d*s+r[15]),n};W.scale=function(n,r,e){var i=e[0],c=e[1],s=e[2];return n[0]=r[0]*i,n[1]=r[1]*i,n[2]=r[2]*i,n[3]=r[3]*i,n[4]=r[4]*c,n[5]=r[5]*c,n[6]=r[6]*c,n[7]=r[7]*c,n[8]=r[8]*s,n[9]=r[9]*s,n[10]=r[10]*s,n[11]=r[11]*s,n[12]=r[12],n[13]=r[13],n[14]=r[14],n[15]=r[15],n};W.rotate=function(n,r,e,i){var c=i[0],s=i[1],f=i[2],h=Math.sqrt(c*c+s*s+f*f),a,l,v,x,M,y,t,w,p,d,R,z,_,m,A,O,q,E,T,j,N,X,g,K;return Math.abs(h)<f1.EPSILON?null:(h=1/h,c*=h,s*=h,f*=h,a=Math.sin(e),l=Math.cos(e),v=1-l,x=r[0],M=r[1],y=r[2],t=r[3],w=r[4],p=r[5],d=r[6],R=r[7],z=r[8],_=r[9],m=r[10],A=r[11],O=c*c*v+l,q=s*c*v+f*a,E=f*c*v-s*a,T=c*s*v-f*a,j=s*s*v+l,N=f*s*v+c*a,X=c*f*v+s*a,g=s*f*v-c*a,K=f*f*v+l,n[0]=x*O+w*q+z*E,n[1]=M*O+p*q+_*E,n[2]=y*O+d*q+m*E,n[3]=t*O+R*q+A*E,n[4]=x*T+w*j+z*N,n[5]=M*T+p*j+_*N,n[6]=y*T+d*j+m*N,n[7]=t*T+R*j+A*N,n[8]=x*X+w*g+z*K,n[9]=M*X+p*g+_*K,n[10]=y*X+d*g+m*K,n[11]=t*X+R*g+A*K,r!==n&&(n[12]=r[12],n[13]=r[13],n[14]=r[14],n[15]=r[15]),n)};W.rotateX=function(n,r,e){var i=Math.sin(e),c=Math.cos(e),s=r[4],f=r[5],h=r[6],a=r[7],l=r[8],v=r[9],x=r[10],M=r[11];return r!==n&&(n[0]=r[0],n[1]=r[1],n[2]=r[2],n[3]=r[3],n[12]=r[12],n[13]=r[13],n[14]=r[14],n[15]=r[15]),n[4]=s*c+l*i,n[5]=f*c+v*i,n[6]=h*c+x*i,n[7]=a*c+M*i,n[8]=l*c-s*i,n[9]=v*c-f*i,n[10]=x*c-h*i,n[11]=M*c-a*i,n};W.rotateY=function(n,r,e){var i=Math.sin(e),c=Math.cos(e),s=r[0],f=r[1],h=r[2],a=r[3],l=r[8],v=r[9],x=r[10],M=r[11];return r!==n&&(n[4]=r[4],n[5]=r[5],n[6]=r[6],n[7]=r[7],n[12]=r[12],n[13]=r[13],n[14]=r[14],n[15]=r[15]),n[0]=s*c-l*i,n[1]=f*c-v*i,n[2]=h*c-x*i,n[3]=a*c-M*i,n[8]=s*i+l*c,n[9]=f*i+v*c,n[10]=h*i+x*c,n[11]=a*i+M*c,n};W.rotateZ=function(n,r,e){var i=Math.sin(e),c=Math.cos(e),s=r[0],f=r[1],h=r[2],a=r[3],l=r[4],v=r[5],x=r[6],M=r[7];return r!==n&&(n[8]=r[8],n[9]=r[9],n[10]=r[10],n[11]=r[11],n[12]=r[12],n[13]=r[13],n[14]=r[14],n[15]=r[15]),n[0]=s*c+l*i,n[1]=f*c+v*i,n[2]=h*c+x*i,n[3]=a*c+M*i,n[4]=l*c-s*i,n[5]=v*c-f*i,n[6]=x*c-h*i,n[7]=M*c-a*i,n};W.fromTranslation=function(n,r){return n[0]=1,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=1,n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[10]=1,n[11]=0,n[12]=r[0],n[13]=r[1],n[14]=r[2],n[15]=1,n};W.fromScaling=function(n,r){return n[0]=r[0],n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=r[1],n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[10]=r[2],n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,n};W.fromRotation=function(n,r,e){var i=e[0],c=e[1],s=e[2],f=Math.sqrt(i*i+c*c+s*s),h,a,l;return Math.abs(f)<f1.EPSILON?null:(f=1/f,i*=f,c*=f,s*=f,h=Math.sin(r),a=Math.cos(r),l=1-a,n[0]=i*i*l+a,n[1]=c*i*l+s*h,n[2]=s*i*l-c*h,n[3]=0,n[4]=i*c*l-s*h,n[5]=c*c*l+a,n[6]=s*c*l+i*h,n[7]=0,n[8]=i*s*l+c*h,n[9]=c*s*l-i*h,n[10]=s*s*l+a,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,n)};W.fromXRotation=function(n,r){var e=Math.sin(r),i=Math.cos(r);return n[0]=1,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=i,n[6]=e,n[7]=0,n[8]=0,n[9]=-e,n[10]=i,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,n};W.fromYRotation=function(n,r){var e=Math.sin(r),i=Math.cos(r);return n[0]=i,n[1]=0,n[2]=-e,n[3]=0,n[4]=0,n[5]=1,n[6]=0,n[7]=0,n[8]=e,n[9]=0,n[10]=i,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,n};W.fromZRotation=function(n,r){var e=Math.sin(r),i=Math.cos(r);return n[0]=i,n[1]=e,n[2]=0,n[3]=0,n[4]=-e,n[5]=i,n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[10]=1,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,n};W.fromRotationTranslation=function(n,r,e){var i=r[0],c=r[1],s=r[2],f=r[3],h=i+i,a=c+c,l=s+s,v=i*h,x=i*a,M=i*l,y=c*a,t=c*l,w=s*l,p=f*h,d=f*a,R=f*l;return n[0]=1-(y+w),n[1]=x+R,n[2]=M-d,n[3]=0,n[4]=x-R,n[5]=1-(v+w),n[6]=t+p,n[7]=0,n[8]=M+d,n[9]=t-p,n[10]=1-(v+y),n[11]=0,n[12]=e[0],n[13]=e[1],n[14]=e[2],n[15]=1,n};W.fromRotationTranslationScale=function(n,r,e,i){var c=r[0],s=r[1],f=r[2],h=r[3],a=c+c,l=s+s,v=f+f,x=c*a,M=c*l,y=c*v,t=s*l,w=s*v,p=f*v,d=h*a,R=h*l,z=h*v,_=i[0],m=i[1],A=i[2];return n[0]=(1-(t+p))*_,n[1]=(M+z)*_,n[2]=(y-R)*_,n[3]=0,n[4]=(M-z)*m,n[5]=(1-(x+p))*m,n[6]=(w+d)*m,n[7]=0,n[8]=(y+R)*A,n[9]=(w-d)*A,n[10]=(1-(x+t))*A,n[11]=0,n[12]=e[0],n[13]=e[1],n[14]=e[2],n[15]=1,n};W.fromRotationTranslationScaleOrigin=function(n,r,e,i,c){var s=r[0],f=r[1],h=r[2],a=r[3],l=s+s,v=f+f,x=h+h,M=s*l,y=s*v,t=s*x,w=f*v,p=f*x,d=h*x,R=a*l,z=a*v,_=a*x,m=i[0],A=i[1],O=i[2],q=c[0],E=c[1],T=c[2];return n[0]=(1-(w+d))*m,n[1]=(y+_)*m,n[2]=(t-z)*m,n[3]=0,n[4]=(y-_)*A,n[5]=(1-(M+d))*A,n[6]=(p+R)*A,n[7]=0,n[8]=(t+z)*O,n[9]=(p-R)*O,n[10]=(1-(M+w))*O,n[11]=0,n[12]=e[0]+q-(n[0]*q+n[4]*E+n[8]*T),n[13]=e[1]+E-(n[1]*q+n[5]*E+n[9]*T),n[14]=e[2]+T-(n[2]*q+n[6]*E+n[10]*T),n[15]=1,n};W.fromQuat=function(n,r){var e=r[0],i=r[1],c=r[2],s=r[3],f=e+e,h=i+i,a=c+c,l=e*f,v=i*f,x=i*h,M=c*f,y=c*h,t=c*a,w=s*f,p=s*h,d=s*a;return n[0]=1-x-t,n[1]=v+d,n[2]=M-p,n[3]=0,n[4]=v-d,n[5]=1-l-t,n[6]=y+w,n[7]=0,n[8]=M+p,n[9]=y-w,n[10]=1-l-x,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,n};W.frustum=function(n,r,e,i,c,s,f){var h=1/(e-r),a=1/(c-i),l=1/(s-f);return n[0]=s*2*h,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=s*2*a,n[6]=0,n[7]=0,n[8]=(e+r)*h,n[9]=(c+i)*a,n[10]=(f+s)*l,n[11]=-1,n[12]=0,n[13]=0,n[14]=f*s*2*l,n[15]=0,n};W.perspective=function(n,r,e,i,c){var s=1/Math.tan(r/2),f=1/(i-c);return n[0]=s/e,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=s,n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[10]=(c+i)*f,n[11]=-1,n[12]=0,n[13]=0,n[14]=2*c*i*f,n[15]=0,n};W.perspectiveFromFieldOfView=function(n,r,e,i){var c=Math.tan(r.upDegrees*Math.PI/180),s=Math.tan(r.downDegrees*Math.PI/180),f=Math.tan(r.leftDegrees*Math.PI/180),h=Math.tan(r.rightDegrees*Math.PI/180),a=2/(f+h),l=2/(c+s);return n[0]=a,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=l,n[6]=0,n[7]=0,n[8]=-((f-h)*a*.5),n[9]=(c-s)*l*.5,n[10]=i/(e-i),n[11]=-1,n[12]=0,n[13]=0,n[14]=i*e/(e-i),n[15]=0,n};W.ortho=function(n,r,e,i,c,s,f){var h=1/(r-e),a=1/(i-c),l=1/(s-f);return n[0]=-2*h,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=-2*a,n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[10]=2*l,n[11]=0,n[12]=(r+e)*h,n[13]=(c+i)*a,n[14]=(f+s)*l,n[15]=1,n};W.lookAt=function(n,r,e,i){var c,s,f,h,a,l,v,x,M,y,t=r[0],w=r[1],p=r[2],d=i[0],R=i[1],z=i[2],_=e[0],m=e[1],A=e[2];return Math.abs(t-_)<f1.EPSILON&&Math.abs(w-m)<f1.EPSILON&&Math.abs(p-A)<f1.EPSILON?W.identity(n):(v=t-_,x=w-m,M=p-A,y=1/Math.sqrt(v*v+x*x+M*M),v*=y,x*=y,M*=y,c=R*M-z*x,s=z*v-d*M,f=d*x-R*v,y=Math.sqrt(c*c+s*s+f*f),y?(y=1/y,c*=y,s*=y,f*=y):(c=0,s=0,f=0),h=x*f-M*s,a=M*c-v*f,l=v*s-x*c,y=Math.sqrt(h*h+a*a+l*l),y?(y=1/y,h*=y,a*=y,l*=y):(h=0,a=0,l=0),n[0]=c,n[1]=h,n[2]=v,n[3]=0,n[4]=s,n[5]=a,n[6]=x,n[7]=0,n[8]=f,n[9]=l,n[10]=M,n[11]=0,n[12]=-(c*t+s*w+f*p),n[13]=-(h*t+a*w+l*p),n[14]=-(v*t+x*w+M*p),n[15]=1,n)};W.str=function(n){return"mat4("+n[0]+", "+n[1]+", "+n[2]+", "+n[3]+", "+n[4]+", "+n[5]+", "+n[6]+", "+n[7]+", "+n[8]+", "+n[9]+", "+n[10]+", "+n[11]+", "+n[12]+", "+n[13]+", "+n[14]+", "+n[15]+")"};W.frob=function(n){return Math.sqrt(Math.pow(n[0],2)+Math.pow(n[1],2)+Math.pow(n[2],2)+Math.pow(n[3],2)+Math.pow(n[4],2)+Math.pow(n[5],2)+Math.pow(n[6],2)+Math.pow(n[7],2)+Math.pow(n[8],2)+Math.pow(n[9],2)+Math.pow(n[10],2)+Math.pow(n[11],2)+Math.pow(n[12],2)+Math.pow(n[13],2)+Math.pow(n[14],2)+Math.pow(n[15],2))};var j1=W,x1=e1,P={};P.create=function(){var n=new x1.ARRAY_TYPE(3);return n[0]=0,n[1]=0,n[2]=0,n};P.clone=function(n){var r=new x1.ARRAY_TYPE(3);return r[0]=n[0],r[1]=n[1],r[2]=n[2],r};P.fromValues=function(n,r,e){var i=new x1.ARRAY_TYPE(3);return i[0]=n,i[1]=r,i[2]=e,i};P.copy=function(n,r){return n[0]=r[0],n[1]=r[1],n[2]=r[2],n};P.set=function(n,r,e,i){return n[0]=r,n[1]=e,n[2]=i,n};P.add=function(n,r,e){return n[0]=r[0]+e[0],n[1]=r[1]+e[1],n[2]=r[2]+e[2],n};P.subtract=function(n,r,e){return n[0]=r[0]-e[0],n[1]=r[1]-e[1],n[2]=r[2]-e[2],n};P.sub=P.subtract;P.multiply=function(n,r,e){return n[0]=r[0]*e[0],n[1]=r[1]*e[1],n[2]=r[2]*e[2],n};P.mul=P.multiply;P.divide=function(n,r,e){return n[0]=r[0]/e[0],n[1]=r[1]/e[1],n[2]=r[2]/e[2],n};P.div=P.divide;P.min=function(n,r,e){return n[0]=Math.min(r[0],e[0]),n[1]=Math.min(r[1],e[1]),n[2]=Math.min(r[2],e[2]),n};P.max=function(n,r,e){return n[0]=Math.max(r[0],e[0]),n[1]=Math.max(r[1],e[1]),n[2]=Math.max(r[2],e[2]),n};P.scale=function(n,r,e){return n[0]=r[0]*e,n[1]=r[1]*e,n[2]=r[2]*e,n};P.scaleAndAdd=function(n,r,e,i){return n[0]=r[0]+e[0]*i,n[1]=r[1]+e[1]*i,n[2]=r[2]+e[2]*i,n};P.distance=function(n,r){var e=r[0]-n[0],i=r[1]-n[1],c=r[2]-n[2];return Math.sqrt(e*e+i*i+c*c)};P.dist=P.distance;P.squaredDistance=function(n,r){var e=r[0]-n[0],i=r[1]-n[1],c=r[2]-n[2];return e*e+i*i+c*c};P.sqrDist=P.squaredDistance;P.length=function(n){var r=n[0],e=n[1],i=n[2];return Math.sqrt(r*r+e*e+i*i)};P.len=P.length;P.squaredLength=function(n){var r=n[0],e=n[1],i=n[2];return r*r+e*e+i*i};P.sqrLen=P.squaredLength;P.negate=function(n,r){return n[0]=-r[0],n[1]=-r[1],n[2]=-r[2],n};P.inverse=function(n,r){return n[0]=1/r[0],n[1]=1/r[1],n[2]=1/r[2],n};P.normalize=function(n,r){var e=r[0],i=r[1],c=r[2],s=e*e+i*i+c*c;return s>0&&(s=1/Math.sqrt(s),n[0]=r[0]*s,n[1]=r[1]*s,n[2]=r[2]*s),n};P.dot=function(n,r){return n[0]*r[0]+n[1]*r[1]+n[2]*r[2]};P.cross=function(n,r,e){var i=r[0],c=r[1],s=r[2],f=e[0],h=e[1],a=e[2];return n[0]=c*a-s*h,n[1]=s*f-i*a,n[2]=i*h-c*f,n};P.lerp=function(n,r,e,i){var c=r[0],s=r[1],f=r[2];return n[0]=c+i*(e[0]-c),n[1]=s+i*(e[1]-s),n[2]=f+i*(e[2]-f),n};P.hermite=function(n,r,e,i,c,s){var f=s*s,h=f*(2*s-3)+1,a=f*(s-2)+s,l=f*(s-1),v=f*(3-2*s);return n[0]=r[0]*h+e[0]*a+i[0]*l+c[0]*v,n[1]=r[1]*h+e[1]*a+i[1]*l+c[1]*v,n[2]=r[2]*h+e[2]*a+i[2]*l+c[2]*v,n};P.bezier=function(n,r,e,i,c,s){var f=1-s,h=f*f,a=s*s,l=h*f,v=3*s*h,x=3*a*f,M=a*s;return n[0]=r[0]*l+e[0]*v+i[0]*x+c[0]*M,n[1]=r[1]*l+e[1]*v+i[1]*x+c[1]*M,n[2]=r[2]*l+e[2]*v+i[2]*x+c[2]*M,n};P.random=function(n,r){r=r||1;var e=x1.RANDOM()*2*Math.PI,i=x1.RANDOM()*2-1,c=Math.sqrt(1-i*i)*r;return n[0]=Math.cos(e)*c,n[1]=Math.sin(e)*c,n[2]=i*r,n};P.transformMat4=function(n,r,e){var i=r[0],c=r[1],s=r[2],f=e[3]*i+e[7]*c+e[11]*s+e[15];return f=f||1,n[0]=(e[0]*i+e[4]*c+e[8]*s+e[12])/f,n[1]=(e[1]*i+e[5]*c+e[9]*s+e[13])/f,n[2]=(e[2]*i+e[6]*c+e[10]*s+e[14])/f,n};P.transformMat3=function(n,r,e){var i=r[0],c=r[1],s=r[2];return n[0]=i*e[0]+c*e[3]+s*e[6],n[1]=i*e[1]+c*e[4]+s*e[7],n[2]=i*e[2]+c*e[5]+s*e[8],n};P.transformQuat=function(n,r,e){var i=r[0],c=r[1],s=r[2],f=e[0],h=e[1],a=e[2],l=e[3],v=l*i+h*s-a*c,x=l*c+a*i-f*s,M=l*s+f*c-h*i,y=-f*i-h*c-a*s;return n[0]=v*l+y*-f+x*-a-M*-h,n[1]=x*l+y*-h+M*-f-v*-a,n[2]=M*l+y*-a+v*-h-x*-f,n};P.rotateX=function(n,r,e,i){var c=[],s=[];return c[0]=r[0]-e[0],c[1]=r[1]-e[1],c[2]=r[2]-e[2],s[0]=c[0],s[1]=c[1]*Math.cos(i)-c[2]*Math.sin(i),s[2]=c[1]*Math.sin(i)+c[2]*Math.cos(i),n[0]=s[0]+e[0],n[1]=s[1]+e[1],n[2]=s[2]+e[2],n};P.rotateY=function(n,r,e,i){var c=[],s=[];return c[0]=r[0]-e[0],c[1]=r[1]-e[1],c[2]=r[2]-e[2],s[0]=c[2]*Math.sin(i)+c[0]*Math.cos(i),s[1]=c[1],s[2]=c[2]*Math.cos(i)-c[0]*Math.sin(i),n[0]=s[0]+e[0],n[1]=s[1]+e[1],n[2]=s[2]+e[2],n};P.rotateZ=function(n,r,e,i){var c=[],s=[];return c[0]=r[0]-e[0],c[1]=r[1]-e[1],c[2]=r[2]-e[2],s[0]=c[0]*Math.cos(i)-c[1]*Math.sin(i),s[1]=c[0]*Math.sin(i)+c[1]*Math.cos(i),s[2]=c[2],n[0]=s[0]+e[0],n[1]=s[1]+e[1],n[2]=s[2]+e[2],n};P.forEach=function(){var n=P.create();return function(r,e,i,c,s,f){var h,a;for(e||(e=3),i||(i=0),c?a=Math.min(c*e+i,r.length):a=r.length,h=i;h<a;h+=e)n[0]=r[h],n[1]=r[h+1],n[2]=r[h+2],s(n,n,f),r[h]=n[0],r[h+1]=n[1],r[h+2]=n[2];return r}}();P.angle=function(n,r){var e=P.fromValues(n[0],n[1],n[2]),i=P.fromValues(r[0],r[1],r[2]);P.normalize(e,e),P.normalize(i,i);var c=P.dot(e,i);return c>1?0:Math.acos(c)};P.str=function(n){return"vec3("+n[0]+", "+n[1]+", "+n[2]+")"};var D1=P,c1=e1,$={};$.create=function(){var n=new c1.ARRAY_TYPE(4);return n[0]=0,n[1]=0,n[2]=0,n[3]=0,n};$.clone=function(n){var r=new c1.ARRAY_TYPE(4);return r[0]=n[0],r[1]=n[1],r[2]=n[2],r[3]=n[3],r};$.fromValues=function(n,r,e,i){var c=new c1.ARRAY_TYPE(4);return c[0]=n,c[1]=r,c[2]=e,c[3]=i,c};$.copy=function(n,r){return n[0]=r[0],n[1]=r[1],n[2]=r[2],n[3]=r[3],n};$.set=function(n,r,e,i,c){return n[0]=r,n[1]=e,n[2]=i,n[3]=c,n};$.add=function(n,r,e){return n[0]=r[0]+e[0],n[1]=r[1]+e[1],n[2]=r[2]+e[2],n[3]=r[3]+e[3],n};$.subtract=function(n,r,e){return n[0]=r[0]-e[0],n[1]=r[1]-e[1],n[2]=r[2]-e[2],n[3]=r[3]-e[3],n};$.sub=$.subtract;$.multiply=function(n,r,e){return n[0]=r[0]*e[0],n[1]=r[1]*e[1],n[2]=r[2]*e[2],n[3]=r[3]*e[3],n};$.mul=$.multiply;$.divide=function(n,r,e){return n[0]=r[0]/e[0],n[1]=r[1]/e[1],n[2]=r[2]/e[2],n[3]=r[3]/e[3],n};$.div=$.divide;$.min=function(n,r,e){return n[0]=Math.min(r[0],e[0]),n[1]=Math.min(r[1],e[1]),n[2]=Math.min(r[2],e[2]),n[3]=Math.min(r[3],e[3]),n};$.max=function(n,r,e){return n[0]=Math.max(r[0],e[0]),n[1]=Math.max(r[1],e[1]),n[2]=Math.max(r[2],e[2]),n[3]=Math.max(r[3],e[3]),n};$.scale=function(n,r,e){return n[0]=r[0]*e,n[1]=r[1]*e,n[2]=r[2]*e,n[3]=r[3]*e,n};$.scaleAndAdd=function(n,r,e,i){return n[0]=r[0]+e[0]*i,n[1]=r[1]+e[1]*i,n[2]=r[2]+e[2]*i,n[3]=r[3]+e[3]*i,n};$.distance=function(n,r){var e=r[0]-n[0],i=r[1]-n[1],c=r[2]-n[2],s=r[3]-n[3];return Math.sqrt(e*e+i*i+c*c+s*s)};$.dist=$.distance;$.squaredDistance=function(n,r){var e=r[0]-n[0],i=r[1]-n[1],c=r[2]-n[2],s=r[3]-n[3];return e*e+i*i+c*c+s*s};$.sqrDist=$.squaredDistance;$.length=function(n){var r=n[0],e=n[1],i=n[2],c=n[3];return Math.sqrt(r*r+e*e+i*i+c*c)};$.len=$.length;$.squaredLength=function(n){var r=n[0],e=n[1],i=n[2],c=n[3];return r*r+e*e+i*i+c*c};$.sqrLen=$.squaredLength;$.negate=function(n,r){return n[0]=-r[0],n[1]=-r[1],n[2]=-r[2],n[3]=-r[3],n};$.inverse=function(n,r){return n[0]=1/r[0],n[1]=1/r[1],n[2]=1/r[2],n[3]=1/r[3],n};$.normalize=function(n,r){var e=r[0],i=r[1],c=r[2],s=r[3],f=e*e+i*i+c*c+s*s;return f>0&&(f=1/Math.sqrt(f),n[0]=e*f,n[1]=i*f,n[2]=c*f,n[3]=s*f),n};$.dot=function(n,r){return n[0]*r[0]+n[1]*r[1]+n[2]*r[2]+n[3]*r[3]};$.lerp=function(n,r,e,i){var c=r[0],s=r[1],f=r[2],h=r[3];return n[0]=c+i*(e[0]-c),n[1]=s+i*(e[1]-s),n[2]=f+i*(e[2]-f),n[3]=h+i*(e[3]-h),n};$.random=function(n,r){return r=r||1,n[0]=c1.RANDOM(),n[1]=c1.RANDOM(),n[2]=c1.RANDOM(),n[3]=c1.RANDOM(),$.normalize(n,n),$.scale(n,n,r),n};$.transformMat4=function(n,r,e){var i=r[0],c=r[1],s=r[2],f=r[3];return n[0]=e[0]*i+e[4]*c+e[8]*s+e[12]*f,n[1]=e[1]*i+e[5]*c+e[9]*s+e[13]*f,n[2]=e[2]*i+e[6]*c+e[10]*s+e[14]*f,n[3]=e[3]*i+e[7]*c+e[11]*s+e[15]*f,n};$.transformQuat=function(n,r,e){var i=r[0],c=r[1],s=r[2],f=e[0],h=e[1],a=e[2],l=e[3],v=l*i+h*s-a*c,x=l*c+a*i-f*s,M=l*s+f*c-h*i,y=-f*i-h*c-a*s;return n[0]=v*l+y*-f+x*-a-M*-h,n[1]=x*l+y*-h+M*-f-v*-a,n[2]=M*l+y*-a+v*-h-x*-f,n[3]=r[3],n};$.forEach=function(){var n=$.create();return function(r,e,i,c,s,f){var h,a;for(e||(e=4),i||(i=0),c?a=Math.min(c*e+i,r.length):a=r.length,h=i;h<a;h+=e)n[0]=r[h],n[1]=r[h+1],n[2]=r[h+2],n[3]=r[h+3],s(n,n,f),r[h]=n[0],r[h+1]=n[1],r[h+2]=n[2],r[h+3]=n[3];return r}}();$.str=function(n){return"vec4("+n[0]+", "+n[1]+", "+n[2]+", "+n[3]+")"};var X1=$,Z1=e1,Q1=E1,u=D1,k=X1,I={};I.create=function(){var n=new Z1.ARRAY_TYPE(4);return n[0]=0,n[1]=0,n[2]=0,n[3]=1,n};I.rotationTo=function(){var n=u.create(),r=u.fromValues(1,0,0),e=u.fromValues(0,1,0);return function(i,c,s){var f=u.dot(c,s);return f<-.999999?(u.cross(n,r,c),u.length(n)<1e-6&&u.cross(n,e,c),u.normalize(n,n),I.setAxisAngle(i,n,Math.PI),i):f>.999999?(i[0]=0,i[1]=0,i[2]=0,i[3]=1,i):(u.cross(n,c,s),i[0]=n[0],i[1]=n[1],i[2]=n[2],i[3]=1+f,I.normalize(i,i))}}();I.setAxes=function(){var n=Q1.create();return function(r,e,i,c){return n[0]=i[0],n[3]=i[1],n[6]=i[2],n[1]=c[0],n[4]=c[1],n[7]=c[2],n[2]=-e[0],n[5]=-e[1],n[8]=-e[2],I.normalize(r,I.fromMat3(r,n))}}();I.clone=k.clone;I.fromValues=k.fromValues;I.copy=k.copy;I.set=k.set;I.identity=function(n){return n[0]=0,n[1]=0,n[2]=0,n[3]=1,n};I.setAxisAngle=function(n,r,e){e=e*.5;var i=Math.sin(e);return n[0]=i*r[0],n[1]=i*r[1],n[2]=i*r[2],n[3]=Math.cos(e),n};I.add=k.add;I.multiply=function(n,r,e){var i=r[0],c=r[1],s=r[2],f=r[3],h=e[0],a=e[1],l=e[2],v=e[3];return n[0]=i*v+f*h+c*l-s*a,n[1]=c*v+f*a+s*h-i*l,n[2]=s*v+f*l+i*a-c*h,n[3]=f*v-i*h-c*a-s*l,n};I.mul=I.multiply;I.scale=k.scale;I.rotateX=function(n,r,e){e*=.5;var i=r[0],c=r[1],s=r[2],f=r[3],h=Math.sin(e),a=Math.cos(e);return n[0]=i*a+f*h,n[1]=c*a+s*h,n[2]=s*a-c*h,n[3]=f*a-i*h,n};I.rotateY=function(n,r,e){e*=.5;var i=r[0],c=r[1],s=r[2],f=r[3],h=Math.sin(e),a=Math.cos(e);return n[0]=i*a-s*h,n[1]=c*a+f*h,n[2]=s*a+i*h,n[3]=f*a-c*h,n};I.rotateZ=function(n,r,e){e*=.5;var i=r[0],c=r[1],s=r[2],f=r[3],h=Math.sin(e),a=Math.cos(e);return n[0]=i*a+c*h,n[1]=c*a-i*h,n[2]=s*a+f*h,n[3]=f*a-s*h,n};I.calculateW=function(n,r){var e=r[0],i=r[1],c=r[2];return n[0]=e,n[1]=i,n[2]=c,n[3]=Math.sqrt(Math.abs(1-e*e-i*i-c*c)),n};I.dot=k.dot;I.lerp=k.lerp;I.slerp=function(n,r,e,i){var c=r[0],s=r[1],f=r[2],h=r[3],a=e[0],l=e[1],v=e[2],x=e[3],M,y,t,w,p;return y=c*a+s*l+f*v+h*x,y<0&&(y=-y,a=-a,l=-l,v=-v,x=-x),1-y>1e-6?(M=Math.acos(y),t=Math.sin(M),w=Math.sin((1-i)*M)/t,p=Math.sin(i*M)/t):(w=1-i,p=i),n[0]=w*c+p*a,n[1]=w*s+p*l,n[2]=w*f+p*v,n[3]=w*h+p*x,n};I.sqlerp=function(){var n=I.create(),r=I.create();return function(e,i,c,s,f,h){return I.slerp(n,i,f,h),I.slerp(r,c,s,h),I.slerp(e,n,r,2*h*(1-h)),e}}();I.invert=function(n,r){var e=r[0],i=r[1],c=r[2],s=r[3],f=e*e+i*i+c*c+s*s,h=f?1/f:0;return n[0]=-e*h,n[1]=-i*h,n[2]=-c*h,n[3]=s*h,n};I.conjugate=function(n,r){return n[0]=-r[0],n[1]=-r[1],n[2]=-r[2],n[3]=r[3],n};I.length=k.length;I.len=I.length;I.squaredLength=k.squaredLength;I.sqrLen=I.squaredLength;I.normalize=k.normalize;I.fromMat3=function(n,r){var e=r[0]+r[4]+r[8],i;if(e>0)i=Math.sqrt(e+1),n[3]=.5*i,i=.5/i,n[0]=(r[5]-r[7])*i,n[1]=(r[6]-r[2])*i,n[2]=(r[1]-r[3])*i;else{var c=0;r[4]>r[0]&&(c=1),r[8]>r[c*3+c]&&(c=2);var s=(c+1)%3,f=(c+2)%3;i=Math.sqrt(r[c*3+c]-r[s*3+s]-r[f*3+f]+1),n[c]=.5*i,i=.5/i,n[3]=(r[s*3+f]-r[f*3+s])*i,n[s]=(r[s*3+c]+r[c*3+s])*i,n[f]=(r[f*3+c]+r[c*3+f])*i}return n};I.str=function(n){return"quat("+n[0]+", "+n[1]+", "+n[2]+", "+n[3]+")"};var B1=I,w1=e1,V={};V.create=function(){var n=new w1.ARRAY_TYPE(2);return n[0]=0,n[1]=0,n};V.clone=function(n){var r=new w1.ARRAY_TYPE(2);return r[0]=n[0],r[1]=n[1],r};V.fromValues=function(n,r){var e=new w1.ARRAY_TYPE(2);return e[0]=n,e[1]=r,e};V.copy=function(n,r){return n[0]=r[0],n[1]=r[1],n};V.set=function(n,r,e){return n[0]=r,n[1]=e,n};V.add=function(n,r,e){return n[0]=r[0]+e[0],n[1]=r[1]+e[1],n};V.subtract=function(n,r,e){return n[0]=r[0]-e[0],n[1]=r[1]-e[1],n};V.sub=V.subtract;V.multiply=function(n,r,e){return n[0]=r[0]*e[0],n[1]=r[1]*e[1],n};V.mul=V.multiply;V.divide=function(n,r,e){return n[0]=r[0]/e[0],n[1]=r[1]/e[1],n};V.div=V.divide;V.min=function(n,r,e){return n[0]=Math.min(r[0],e[0]),n[1]=Math.min(r[1],e[1]),n};V.max=function(n,r,e){return n[0]=Math.max(r[0],e[0]),n[1]=Math.max(r[1],e[1]),n};V.scale=function(n,r,e){return n[0]=r[0]*e,n[1]=r[1]*e,n};V.scaleAndAdd=function(n,r,e,i){return n[0]=r[0]+e[0]*i,n[1]=r[1]+e[1]*i,n};V.distance=function(n,r){var e=r[0]-n[0],i=r[1]-n[1];return Math.sqrt(e*e+i*i)};V.dist=V.distance;V.squaredDistance=function(n,r){var e=r[0]-n[0],i=r[1]-n[1];return e*e+i*i};V.sqrDist=V.squaredDistance;V.length=function(n){var r=n[0],e=n[1];return Math.sqrt(r*r+e*e)};V.len=V.length;V.squaredLength=function(n){var r=n[0],e=n[1];return r*r+e*e};V.sqrLen=V.squaredLength;V.negate=function(n,r){return n[0]=-r[0],n[1]=-r[1],n};V.inverse=function(n,r){return n[0]=1/r[0],n[1]=1/r[1],n};V.normalize=function(n,r){var e=r[0],i=r[1],c=e*e+i*i;return c>0&&(c=1/Math.sqrt(c),n[0]=r[0]*c,n[1]=r[1]*c),n};V.dot=function(n,r){return n[0]*r[0]+n[1]*r[1]};V.cross=function(n,r,e){var i=r[0]*e[1]-r[1]*e[0];return n[0]=n[1]=0,n[2]=i,n};V.lerp=function(n,r,e,i){var c=r[0],s=r[1];return n[0]=c+i*(e[0]-c),n[1]=s+i*(e[1]-s),n};V.random=function(n,r){r=r||1;var e=w1.RANDOM()*2*Math.PI;return n[0]=Math.cos(e)*r,n[1]=Math.sin(e)*r,n};V.transformMat2=function(n,r,e){var i=r[0],c=r[1];return n[0]=e[0]*i+e[2]*c,n[1]=e[1]*i+e[3]*c,n};V.transformMat2d=function(n,r,e){var i=r[0],c=r[1];return n[0]=e[0]*i+e[2]*c+e[4],n[1]=e[1]*i+e[3]*c+e[5],n};V.transformMat3=function(n,r,e){var i=r[0],c=r[1];return n[0]=e[0]*i+e[3]*c+e[6],n[1]=e[1]*i+e[4]*c+e[7],n};V.transformMat4=function(n,r,e){var i=r[0],c=r[1];return n[0]=e[0]*i+e[4]*c+e[12],n[1]=e[1]*i+e[5]*c+e[13],n};V.forEach=function(){var n=V.create();return function(r,e,i,c,s,f){var h,a;for(e||(e=2),i||(i=0),c?a=Math.min(c*e+i,r.length):a=r.length,h=i;h<a;h+=e)n[0]=r[h],n[1]=r[h+1],s(n,n,f),r[h]=n[0],r[h+1]=n[1];return r}}();V.str=function(n){return"vec2("+n[0]+", "+n[1]+")"};var $1=E1,h1=j1,a1=B1,n1=D1;const b=$1.create();function C1(n,r,e,i){r[0]=n[12],r[1]=n[13],r[2]=n[14],i[0]=Math.sqrt(n[0]*n[0]+n[1]*n[1]+n[2]*n[2]),i[1]=Math.sqrt(n[4]*n[4]+n[5]*n[5]+n[6]*n[6]),i[2]=Math.sqrt(n[8]*n[8]+n[9]*n[9]+n[10]*n[10]),b[0]=n[0]/i[0],b[1]=n[1]/i[0],b[2]=n[2]/i[0],b[3]=n[4]/i[1],b[4]=n[5]/i[1],b[5]=n[6]/i[1],b[6]=n[8]/i[2],b[7]=n[9]/i[2],b[8]=n[10]/i[2],a1.fromMat3(e,b)}const d1=$1.create(),t1=new Float32Array(d1.buffer,0*4,3),G1=new Float32Array(d1.buffer,3*4,3),M1=new Float32Array(d1.buffer,6*4,3),H1=n1.fromValues(0,1,0);class J1{constructor(){this.position=n1.create(),this.rotation=a1.create(),this.scale=n1.fromValues(1,1,1),this._matrix=h1.create(),this._wmatrix=h1.create(),this._parent=null,this._children=[],this._invalidM=!0,this._invalidW=!0,this._wposition=new Float32Array(this._wmatrix.buffer,12*4,3)}rotateX(r){a1.rotateX(this.rotation,this.rotation,r),this.invalidate()}rotateY(r){a1.rotateY(this.rotation,this.rotation,r),this.invalidate()}rotateZ(r){a1.rotateZ(this.rotation,this.rotation,r),this.invalidate()}set x(r){this.position[0]=r,this.invalidate()}set y(r){this.position[1]=r,this.invalidate()}set z(r){this.position[2]=r,this.invalidate()}get x(){return this.position[0]}get y(){return this.position[1]}get z(){return this.position[2]}setScale(r){this.scale[0]=this.scale[1]=this.scale[2]=r,this.invalidate()}lookAt(r){n1.subtract(M1,this.position,r),n1.normalize(M1,M1),n1.cross(t1,H1,M1),n1.normalize(t1,t1),n1.cross(G1,M1,t1),a1.fromMat3(this.rotation,d1),this.invalidate()}setMatrix(r){h1.copy(this._matrix,r),C1(r,this.position,this.rotation,this.scale),this._invalidM=!1,this._invalidW=!0}add(r){this._children.indexOf(r)===-1&&(r._parent!==null&&r._parent.remove(r),this._children.push(r),r._parent=this)}remove(r){const e=this._children.indexOf(r);e>-1&&(this._children.splice(e,1),r._parent=null)}invalidate(){this._invalidM=!0,this._invalidW=!0}updateMatrix(){this._invalidM&&(h1.fromRotationTranslationScale(this._matrix,this.rotation,this.position,this.scale),this._invalidM=!1)}updateWorldMatrix(r=!1){this.updateMatrix();const e=this._hasInvalidWorldMatrix(r);e&&this._computeWorldMatrix(r);for(var i=0;i<this._children.length;i++){var c=this._children[i];c._invalidW=c._invalidW||e,c.updateWorldMatrix(!0)}}_computeWorldMatrix(r){const e=this._parent;e!==null?(!r&&e._hasInvalidWorldMatrix(!1)&&(e.updateMatrix(),e._computeWorldMatrix(!1)),h1.multiply(this._wmatrix,e._wmatrix,this._matrix)):h1.copy(this._wmatrix,this._matrix),this._invalidW=!1}_hasInvalidWorldMatrix(r){return this._invalidW||!r&&this._parent!==null&&this._parent._hasInvalidWorldMatrix(!1)}}class K1{constructor(){this._near=.01,this._far=10,this._fov=Math.PI/3,this._vfov=0,this._hfov=0,this._aspect=1,this._fovMode=0,this._proj=J.create(),this._valid=!1}getProjection(){return this._valid||this._updateProjection(),this._proj}set fov(r){this.setVerticalFov(r)}get fov(){return this._fov}set near(r){this._near!==r&&(this._near=r,this._invalidate())}get near(){return this._near}set far(r){this._far!==r&&(this._far=r,this._invalidate())}get far(){return this._far}set aspect(r){this._aspect!==r&&(this._aspect=r,this._invalidate())}get aspect(){return this._aspect}setHorizontalFov(r){this._fov=r,this._fovMode=2,this._invalidate()}setVerticalFov(r){this._fov=r,this._fovMode=1,this._invalidate()}getHorizontalFov(){return this.getProjection(),this._hfov}getVerticalFov(){return this.getProjection(),this._vfov}setAutoFov(r){this._fov=r,this._fovMode=3,this._invalidate()}_updateProjection(){var r=this._fovMode,e=this._aspect;r===1||r===3&&e>1?(this._vfov=this._fov,this._hfov=Math.atan(Math.tan(this._fov/2)*e)*2):(this._hfov=this._fov,this._vfov=Math.atan(Math.tan(this._fov/2)/e)*2),J.perspective(this._proj,this._vfov,e,this._near,this._far),this._valid=!0}_invalidate(){this._valid=!1}}class U1{constructor(){this._near=.01,this._far=10,this._xMin=-1,this._xMax=1,this._yMin=-1,this._yMax=1,this._aspect=1,this._proj=J.create(),this._valid=!1}getProjection(){return this._valid||this._updateProjection(),this._proj}setBound(r,e,i,c){this._xMin=r,this._xMax=e,this._yMin=i,this._yMax=c,this._invalidate()}set near(r){this._near!==r&&(this._near=r,this._invalidate())}get near(){return this._near}set far(r){this._far!==r&&(this._far=r,this._invalidate())}get far(){return this._far}set aspect(r){this._aspect!==r&&(this._aspect=r)}get aspect(){return this._aspect}_updateProjection(){J.ortho(this._proj,this._xMin,this._xMax,this._yMin,this._yMax,this._near,this._far),this._valid=!0}_invalidate(){this._valid=!1}}const z1=J.create(),A1=J.create();class _1 extends J1{constructor(r){super(),this.lens=r,this._view=J.create(),this._viewProj=J.create()}modelViewMatrix(r,e){J.multiply(r,e,this._view)}modelViewProjectionMatrix(r,e){J.multiply(r,this._viewProj,e)}getMVP(r){return J.multiply(z1,this._viewProj,r),z1}unproject(r,e){J.invert(A1,this._viewProj),F1.transformMat4(r,e,A1)}updateViewProjectionMatrix(r,e){this.lens.aspect=r/e,J.multiply(this._viewProj,this.lens.getProjection(),this._view)}_computeWorldMatrix(r){super._computeWorldMatrix(r),J.invert(this._view,this._wmatrix)}static makePerspectiveCamera(){return new _1(new K1)}static makeOrthoCamera(){return new _1(new U1)}}export{_1 as C,J1 as N,K1 as P};
